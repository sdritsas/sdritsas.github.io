
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Stylianos Dritsas">
      
      
      
        <link rel="prev" href="../containment/">
      
      
        <link rel="next" href="../mappings/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.40">
    
    
      
        <title>Intersection - Digital Design and Fabrication</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8c3ca2c6.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 22c5.5 0 10-4.5 10-10S17.5 2 12 2 2 6.5 2 12s4.5 10 10 10M11 7h2v2h-2zm3 10h-4v-2h1v-2h-1v-2h3v4h1z"/></svg>');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/style.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#intersections" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Digital Design and Fabrication" class="md-header__button md-logo" aria-label="Digital Design and Fabrication" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 2 4 4h-3v7.85l6.53 3.76L21 15.03l1.5 5.47-5.5 1.46 1.53-2.61L12 15.58l-6.53 3.77L7 21.96 1.5 20.5 3 15.03l1.47 2.58L11 13.85V6H8z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Digital Design and Fabrication
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Intersection
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Digital Design and Fabrication" class="md-nav__button md-logo" aria-label="Digital Design and Fabrication" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 2 4 4h-3v7.85l6.53 3.76L21 15.03l1.5 5.47-5.5 1.46 1.53-2.61L12 15.58l-6.53 3.77L7 21.96 1.5 20.5 3 15.03l1.47 2.58L11 13.85V6H8z"/></svg>

    </a>
    Digital Design and Fabrication
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Parametrics
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Parametrics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../parametrics/components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Components
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../parametrics/template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Template
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../parametrics/cpython/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CPython
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Programming
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Programming
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../programming/collections/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Collections
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../programming/functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../programming/objects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Objects
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Geometry
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Geometry
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Vectors
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Vectors
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vectors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vectors/distances/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Distance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vectors/addition/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Addition
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vectors/subtraction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Subtraction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vectors/multiplication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiplication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vectors/normalize/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Normalization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vectors/dot-product/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dot Product
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vectors/cross-product/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cross Product
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vectors/systems/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coordinate Systems
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vectors/transforms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transformations
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Curves
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Curves
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../curves/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../curves/euclidean/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Euclidean
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../curves/computational/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Computational
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Surfaces
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Surfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../surfaces/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../surfaces/euclidean/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Euclidean
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../surfaces/computational/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Computational
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Meshes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Meshes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../meshes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Geometry
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../meshes/topology/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Topology
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Solids
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Solids
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../solids/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../solids/constructive/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Constructive
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../solids/boundary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Boundary
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../solids/voxels/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Volumetric
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../solids/clouds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Point Clouds
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Constructions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Constructions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../angles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Angles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../areas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Areas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../centroids/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Centroids
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../clashes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Clashes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../containment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Containment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Intersection
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Intersection
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#line-plane" class="md-nav__link">
    <span class="md-ellipsis">
      Line Plane
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plane-plane-plane" class="md-nav__link">
    <span class="md-ellipsis">
      Plane Plane Plane
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plane-plane" class="md-nav__link">
    <span class="md-ellipsis">
      Plane Plane
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#line-line-fast" class="md-nav__link">
    <span class="md-ellipsis">
      Line Line (Fast)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#line-line-safe" class="md-nav__link">
    <span class="md-ellipsis">
      Line Line (Safe)
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mappings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mappings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../offsets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Offsets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../perpendiculars/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Perpendiculars
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../polygons/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Polygons
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../projections/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Projections
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reflections/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reflections
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#line-plane" class="md-nav__link">
    <span class="md-ellipsis">
      Line Plane
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plane-plane-plane" class="md-nav__link">
    <span class="md-ellipsis">
      Plane Plane Plane
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#plane-plane" class="md-nav__link">
    <span class="md-ellipsis">
      Plane Plane
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#line-line-fast" class="md-nav__link">
    <span class="md-ellipsis">
      Line Line (Fast)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#line-line-safe" class="md-nav__link">
    <span class="md-ellipsis">
      Line Line (Safe)
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="intersections">Intersections</h1>
<p>The objective of this section is to cover geometric constructions using points and vectors. In particular, this section focuses on computing intersections between geometric entities.</p>
<h2 id="line-plane">Line Plane</h2>
<p>Provided with a line <code>( a, b )</code>, defined by two points <code>a</code> and <code>b</code>; and plane <code>( o, n )</code>, defined by its origin point <code>o</code> and its unit normal vector <code>n</code>, determine the point of their intersection.</p>
<div class="highlight"><pre><span></span><code><span id="__span-0-1"><span class="sd">&quot;&quot;&quot; Inputs</span>
</span><span id="__span-0-2"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3"><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="ne">Point3d</span><span class="p">(</span> <span class="n">ax</span><span class="p">,</span> <span class="n">ay</span><span class="p">,</span> <span class="n">az</span> <span class="p">),</span>  <span class="ne">Point3d</span><span class="p">(</span> <span class="n">bx</span><span class="p">,</span> <span class="n">by</span><span class="p">,</span> <span class="n">bz</span> <span class="p">)</span>
</span><span id="__span-0-4"><span class="n">o</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="ne">Point3d</span><span class="p">(</span> <span class="n">ox</span><span class="p">,</span> <span class="n">oy</span><span class="p">,</span> <span class="n">oz</span> <span class="p">),</span> <span class="ne">Vector3d</span><span class="p">(</span> <span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">nz</span> <span class="p">)</span>
</span></code></pre></div>
<details class="solution">
<summary>Solution</summary>
<p>The point of intersection <code>p</code> must be on the line, therefore it can be expressed as <code>p = a * ( 1 - t ) + b * t</code>, or by using vector <code>u = b - a</code> as <code>p = a + u * t</code>. Meanwhile, the point is also on the plane, therefore its projected distance to the plane must be zero. This is expressed as <code>n · ( p - o ) = 0</code>, see the <a href="../../surfaces/euclidean/#implicit">implicit form</a> of the plane.</p>
<div class="highlight"><span class="filename">Math</span><pre><span></span><code><span id="__span-1-1"><span class="n">n</span> <span class="err">·</span> <span class="p">(</span> <span class="n">p</span> <span class="o">-</span> <span class="n">o</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-1-2">
</span><span id="__span-1-3"><span class="ow">or</span> <span class="k">with</span> <span class="n">substituting</span>
</span><span id="__span-1-4">
</span><span id="__span-1-5"><span class="n">n</span> <span class="err">·</span> <span class="p">(</span> <span class="n">a</span> <span class="o">+</span> <span class="n">u</span> <span class="o">*</span> <span class="n">t</span> <span class="o">-</span> <span class="n">o</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-1-6">
</span><span id="__span-1-7"><span class="ow">or</span> <span class="k">with</span> <span class="n">expanding</span>
</span><span id="__span-1-8">
</span><span id="__span-1-9"><span class="n">n</span> <span class="err">·</span> <span class="p">(</span> <span class="n">a</span> <span class="o">-</span> <span class="n">o</span> <span class="p">)</span> <span class="o">+</span> <span class="n">n</span> <span class="err">·</span> <span class="n">u</span> <span class="o">*</span> <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-1-10">
</span><span id="__span-1-11"><span class="ow">or</span> <span class="k">with</span> <span class="n">solving</span>
</span><span id="__span-1-12">
</span><span id="__span-1-13"><span class="n">t</span> <span class="o">=</span> <span class="n">n</span> <span class="err">·</span> <span class="p">(</span> <span class="n">o</span> <span class="o">-</span> <span class="n">a</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="n">n</span> <span class="err">·</span> <span class="n">u</span> <span class="p">)</span>
</span></code></pre></div>
<p>Computing the point of intersection requires constructing a couple of vectors and obtaining their dot products with the plane's normal vector.</p>
<div class="highlight"><pre><span></span><code><span id="__span-2-1"><span class="sd">&quot;&quot;&quot; Line Plane Intersection</span>
</span><span id="__span-2-2"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-2-3"><span class="k">def</span><span class="w"> </span><span class="nf">LinePlaneFast</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">n</span> <span class="p">):</span>
</span><span id="__span-2-4">    <span class="n">u</span> <span class="o">=</span> <span class="n">b</span> <span class="o">-</span> <span class="n">a</span>
</span><span id="__span-2-5">    <span class="n">v</span> <span class="o">=</span> <span class="n">o</span> <span class="o">-</span> <span class="n">a</span>
</span><span id="__span-2-6">    <span class="k">return</span> <span class="p">(</span> <span class="n">n</span> <span class="o">*</span> <span class="n">v</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="n">n</span> <span class="o">*</span> <span class="n">u</span> <span class="p">)</span>
</span><span id="__span-2-7">
</span><span id="__span-2-8"><span class="n">t</span> <span class="o">=</span> <span class="n">LinePlaneFast</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">n</span> <span class="p">)</span>
</span><span id="__span-2-9"><span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;t: </span><span class="si">{:&gt;.5f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span> <span class="p">)</span>
</span><span id="__span-2-10"><span class="n">p</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">t</span> <span class="p">)</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">t</span>
</span></code></pre></div>
<p>Note however that the denominator dot product <code>n · u</code> can become zero if the plane's normal and the line's direction are orthogonal. This is because the line is parallel to the plane and thus they do not intersect.</p>
<div class="highlight"><pre><span></span><code><span id="__span-3-1"><span class="sd">&quot;&quot;&quot; Line Plane Intersection</span>
</span><span id="__span-3-2"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-3-3"><span class="k">def</span><span class="w"> </span><span class="nf">LinePlaneSafe</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">epsilon</span> <span class="o">=</span> <span class="mf">1e-5</span> <span class="p">):</span>
</span><span id="__span-3-4">    <span class="n">u</span> <span class="o">=</span> <span class="n">b</span> <span class="o">-</span> <span class="n">a</span>
</span><span id="__span-3-5">    <span class="n">v</span> <span class="o">=</span> <span class="n">o</span> <span class="o">-</span> <span class="n">a</span>
</span><span id="__span-3-6">    <span class="n">d</span> <span class="o">=</span> <span class="n">n</span> <span class="o">*</span> <span class="n">u</span>
</span><span id="__span-3-7">    <span class="k">if</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span> <span class="n">d</span> <span class="p">)</span> <span class="o">&lt;=</span> <span class="n">epsilon</span> <span class="p">):</span>
</span><span id="__span-3-8">        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="mf">0.0</span>
</span><span id="__span-3-9">    <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="p">(</span> <span class="n">n</span> <span class="o">*</span> <span class="n">v</span> <span class="p">)</span> <span class="o">/</span> <span class="n">d</span>
</span><span id="__span-3-10">
</span><span id="__span-3-11"><span class="n">success</span><span class="p">,</span> <span class="n">t</span> <span class="o">=</span> <span class="n">LinePlaneSafe</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">n</span> <span class="p">)</span>
</span><span id="__span-3-12"><span class="k">if</span><span class="p">(</span> <span class="n">success</span> <span class="p">):</span>
</span><span id="__span-3-13">    <span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;t: </span><span class="si">{:&gt;.5f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span> <span class="p">)</span>
</span><span id="__span-3-14">    <span class="n">p</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">t</span> <span class="p">)</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">t</span>
</span><span id="__span-3-15"><span class="k">else</span><span class="p">:</span>
</span><span id="__span-3-16">    <span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;Parallel&#39;</span> <span class="p">)</span>
</span></code></pre></div>
<p>Rhino's <code>Intersection</code> class provides the <code>LinePlane( )</code> method which computes the point of intersection, if it exists, or returns a failure status otherwise.</p>
<div class="highlight"><pre><span></span><code><span id="__span-4-1"><span class="n">success</span><span class="p">,</span> <span class="n">t</span> <span class="o">=</span> <span class="ne">Intersection</span><span class="o">.</span><span class="n">LinePlane</span><span class="p">(</span>
</span><span id="__span-4-2">    <span class="ne">Line</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="p">),</span> <span class="ne">Plane</span><span class="p">(</span> <span class="n">o</span><span class="p">,</span> <span class="n">n</span> <span class="p">)</span> <span class="p">)</span>
</span><span id="__span-4-3">
</span><span id="__span-4-4"><span class="k">if</span><span class="p">(</span> <span class="n">success</span> <span class="p">):</span>
</span><span id="__span-4-5">    <span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;t: </span><span class="si">{:&gt;.5f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span> <span class="p">)</span>
</span><span id="__span-4-6">    <span class="n">p</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">t</span> <span class="p">)</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">t</span>
</span><span id="__span-4-7"><span class="k">else</span><span class="p">:</span>
</span><span id="__span-4-8">    <span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;Parallel&#39;</span> <span class="p">)</span>
</span></code></pre></div>
<p><a class="md-button" href="../lineplane.gh">Grasshopper <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 20h14v-2H5m14-9h-4V3H9v6H5l7 7z"/></svg></span></a></p>
</details>
<h2 id="plane-plane-plane">Plane Plane Plane</h2>
<p>Provided with three planes <code>( a, u )</code>, <code>( b, v )</code> and <code>( c, n )</code>, defined by their origin points <code>a</code>, <code>b</code>, and <code>c</code>; and their unit normal vectors <code>u</code>, <code>v</code> and <code>n</code>, respectively, determine the point of their intersection.</p>
<div class="highlight"><pre><span></span><code><span id="__span-5-1"><span class="sd">&quot;&quot;&quot; Inputs</span>
</span><span id="__span-5-2"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-5-3"><span class="n">a</span><span class="p">,</span> <span class="n">u</span> <span class="o">=</span> <span class="ne">Point3d</span><span class="p">(</span> <span class="n">ax</span><span class="p">,</span> <span class="n">ay</span><span class="p">,</span> <span class="n">az</span> <span class="p">),</span> <span class="ne">Vector3d</span><span class="p">(</span> <span class="n">ux</span><span class="p">,</span> <span class="n">uy</span><span class="p">,</span> <span class="n">uz</span> <span class="p">)</span>
</span><span id="__span-5-4"><span class="n">b</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="ne">Point3d</span><span class="p">(</span> <span class="n">bx</span><span class="p">,</span> <span class="n">by</span><span class="p">,</span> <span class="n">bz</span> <span class="p">),</span> <span class="ne">Vector3d</span><span class="p">(</span> <span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">vz</span> <span class="p">)</span>
</span><span id="__span-5-5"><span class="n">c</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="ne">Point3d</span><span class="p">(</span> <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">,</span> <span class="n">cz</span> <span class="p">),</span> <span class="ne">Vector3d</span><span class="p">(</span> <span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">nz</span> <span class="p">)</span>
</span></code></pre></div>
<details class="solution">
<summary>Solution</summary>
<p>This problem can be approached using standard linear algebra methods, for instance <a href="https://en.wikipedia.org/wiki/Cramer's_rule">Cramer's rule</a>, since there are three plane equations and three unknown coordinates, of the point of intersection. The conversion between the implicit origin-normal and explicit equation form of a plane is described in the <a href="../../surfaces/euclidean/#explicit">plane</a> section.</p>
<div class="highlight"><span class="filename">Math</span><pre><span></span><code><span id="__span-6-1"><span class="n">u</span><span class="o">.</span><span class="n">X</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">u</span><span class="o">.</span><span class="n">Y</span> <span class="o">*</span> <span class="n">y</span> <span class="o">+</span> <span class="n">u</span><span class="o">.</span><span class="n">Z</span> <span class="o">*</span> <span class="n">z</span> <span class="o">=</span> <span class="n">a</span> <span class="err">·</span> <span class="n">u</span>
</span><span id="__span-6-2"><span class="n">v</span><span class="o">.</span><span class="n">X</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">n</span><span class="o">.</span><span class="n">Y</span> <span class="o">*</span> <span class="n">y</span> <span class="o">+</span> <span class="n">n</span><span class="o">.</span><span class="n">Z</span> <span class="o">*</span> <span class="n">z</span> <span class="o">=</span> <span class="n">b</span> <span class="err">·</span> <span class="n">v</span>
</span><span id="__span-6-3"><span class="n">n</span><span class="o">.</span><span class="n">X</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="n">Y</span> <span class="o">*</span> <span class="n">y</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="n">Z</span> <span class="o">*</span> <span class="n">z</span> <span class="o">=</span> <span class="n">c</span> <span class="err">·</span> <span class="n">n</span>
</span><span id="__span-6-4">
</span><span id="__span-6-5"><span class="ow">or</span> <span class="k">with</span> <span class="n">matrix</span> <span class="n">notation</span>
</span><span id="__span-6-6">
</span><span id="__span-6-7"><span class="p">[</span> <span class="n">u</span><span class="o">.</span><span class="n">X</span>  <span class="n">u</span><span class="o">.</span><span class="n">Y</span>  <span class="n">u</span><span class="o">.</span><span class="n">Z</span> <span class="p">]</span>   <span class="p">[</span> <span class="n">x</span> <span class="p">]</span>   <span class="p">[</span> <span class="n">a</span> <span class="err">·</span> <span class="n">u</span> <span class="p">]</span>
</span><span id="__span-6-8"><span class="p">[</span> <span class="n">v</span><span class="o">.</span><span class="n">X</span>  <span class="n">v</span><span class="o">.</span><span class="n">Y</span>  <span class="n">v</span><span class="o">.</span><span class="n">Z</span> <span class="p">]</span> <span class="err">×</span> <span class="p">[</span> <span class="n">y</span> <span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="n">b</span> <span class="err">·</span> <span class="n">v</span> <span class="p">]</span>
</span><span id="__span-6-9"><span class="p">[</span> <span class="n">n</span><span class="o">.</span><span class="n">X</span>  <span class="n">n</span><span class="o">.</span><span class="n">Y</span>  <span class="n">n</span><span class="o">.</span><span class="n">Z</span> <span class="p">]</span>   <span class="p">[</span> <span class="n">z</span> <span class="p">]</span>   <span class="p">[</span> <span class="n">c</span> <span class="err">·</span> <span class="n">n</span> <span class="p">]</span>
</span></code></pre></div>
<p>Note that the intersection will fail if the determinant of the basis formed by the plane normals is zero. Geometrically, this the result of two or more planes being parallel with one another.</p>
<div class="highlight"><pre><span></span><code><span id="__span-7-1"><span class="sd">&#39;&#39;&#39; Determinant of 3x3 Matrix</span>
</span><span id="__span-7-2"><span class="sd">&#39;&#39;&#39;</span>
</span><span id="__span-7-3"><span class="k">def</span><span class="w"> </span><span class="nf">Det3x3</span><span class="p">(</span> <span class="n">xx</span><span class="p">,</span> <span class="n">yx</span><span class="p">,</span> <span class="n">zx</span><span class="p">,</span>
</span><span id="__span-7-4">            <span class="n">xy</span><span class="p">,</span> <span class="n">yy</span><span class="p">,</span> <span class="n">zy</span><span class="p">,</span>
</span><span id="__span-7-5">            <span class="n">xz</span><span class="p">,</span> <span class="n">yz</span><span class="p">,</span> <span class="n">zz</span> <span class="p">):</span>
</span><span id="__span-7-6">    <span class="k">return</span> <span class="p">(</span> <span class="n">xx</span> <span class="o">*</span> <span class="p">(</span> <span class="n">yy</span> <span class="o">*</span> <span class="n">zz</span> <span class="o">-</span> <span class="n">zy</span> <span class="o">*</span> <span class="n">yz</span> <span class="p">)</span> <span class="o">-</span>
</span><span id="__span-7-7">             <span class="n">yx</span> <span class="o">*</span> <span class="p">(</span> <span class="n">xy</span> <span class="o">*</span> <span class="n">zz</span> <span class="o">-</span> <span class="n">zy</span> <span class="o">*</span> <span class="n">xz</span> <span class="p">)</span> <span class="o">+</span>
</span><span id="__span-7-8">             <span class="n">zx</span> <span class="o">*</span> <span class="p">(</span> <span class="n">xy</span> <span class="o">*</span> <span class="n">yz</span> <span class="o">-</span> <span class="n">yy</span> <span class="o">*</span> <span class="n">xz</span> <span class="p">)</span> <span class="p">)</span>
</span><span id="__span-7-9">
</span><span id="__span-7-10"><span class="sd">&#39;&#39;&#39; Triple Plane Intersection</span>
</span><span id="__span-7-11"><span class="sd">&#39;&#39;&#39;</span>
</span><span id="__span-7-12"><span class="k">def</span><span class="w"> </span><span class="nf">TriplePlane</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">n</span> <span class="p">):</span>
</span><span id="__span-7-13"><span class="w">    </span><span class="sd">&#39;&#39;&#39; Plane Distances</span>
</span><span id="__span-7-14"><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="__span-7-15">    <span class="n">d</span> <span class="o">=</span> <span class="ne">Vector3d</span><span class="p">(</span>
</span><span id="__span-7-16">        <span class="n">u</span> <span class="o">*</span> <span class="ne">Vector3d</span><span class="p">(</span> <span class="n">a</span> <span class="p">),</span>
</span><span id="__span-7-17">        <span class="n">v</span> <span class="o">*</span> <span class="ne">Vector3d</span><span class="p">(</span> <span class="n">b</span> <span class="p">),</span>
</span><span id="__span-7-18">        <span class="n">n</span> <span class="o">*</span> <span class="ne">Vector3d</span><span class="p">(</span> <span class="n">c</span> <span class="p">)</span> <span class="p">)</span>
</span><span id="__span-7-19">
</span><span id="__span-7-20"><span class="w">    </span><span class="sd">&#39;&#39;&#39; Basis Determinant</span>
</span><span id="__span-7-21"><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="__span-7-22">    <span class="n">D</span> <span class="o">=</span> <span class="n">Det3x3</span><span class="p">(</span> <span class="n">u</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">u</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">u</span><span class="o">.</span><span class="n">Z</span><span class="p">,</span>
</span><span id="__span-7-23">                <span class="n">v</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">Z</span><span class="p">,</span>
</span><span id="__span-7-24">                <span class="n">n</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">n</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">n</span><span class="o">.</span><span class="n">Z</span> <span class="p">)</span>
</span><span id="__span-7-25">    <span class="k">if</span><span class="p">(</span> <span class="n">D</span> <span class="o">==</span> <span class="mf">0.0</span> <span class="p">):</span> <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="n">D</span>
</span><span id="__span-7-26">
</span><span id="__span-7-27"><span class="w">    </span><span class="sd">&#39;&#39;&#39; Coordinate Determinants</span>
</span><span id="__span-7-28"><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="__span-7-29">    <span class="n">X</span> <span class="o">=</span> <span class="n">Det3x3</span><span class="p">(</span> <span class="n">d</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">u</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">u</span><span class="o">.</span><span class="n">Z</span><span class="p">,</span>
</span><span id="__span-7-30">                <span class="n">d</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">Z</span><span class="p">,</span>
</span><span id="__span-7-31">                <span class="n">d</span><span class="o">.</span><span class="n">Z</span><span class="p">,</span> <span class="n">n</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">n</span><span class="o">.</span><span class="n">Z</span> <span class="p">)</span>
</span><span id="__span-7-32">
</span><span id="__span-7-33">    <span class="n">Y</span> <span class="o">=</span> <span class="n">Det3x3</span><span class="p">(</span> <span class="n">u</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">u</span><span class="o">.</span><span class="n">Z</span><span class="p">,</span>
</span><span id="__span-7-34">                <span class="n">v</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">Z</span><span class="p">,</span>
</span><span id="__span-7-35">                <span class="n">n</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">Z</span><span class="p">,</span> <span class="n">n</span><span class="o">.</span><span class="n">Z</span> <span class="p">)</span>
</span><span id="__span-7-36">
</span><span id="__span-7-37">    <span class="n">Z</span> <span class="o">=</span> <span class="n">Det3x3</span><span class="p">(</span> <span class="n">u</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">u</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">X</span><span class="p">,</span>
</span><span id="__span-7-38">                <span class="n">v</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span>
</span><span id="__span-7-39">                <span class="n">n</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">n</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">d</span><span class="o">.</span><span class="n">Z</span> <span class="p">)</span>
</span><span id="__span-7-40">
</span><span id="__span-7-41">    <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="ne">Point3d</span><span class="p">(</span> <span class="n">X</span> <span class="o">/</span> <span class="n">D</span><span class="p">,</span> <span class="n">Y</span> <span class="o">/</span> <span class="n">D</span><span class="p">,</span> <span class="n">Z</span> <span class="o">/</span> <span class="n">D</span> <span class="p">)</span>
</span><span id="__span-7-42">
</span><span id="__span-7-43"><span class="n">success</span><span class="p">,</span> <span class="n">point</span> <span class="o">=</span> <span class="n">TriplePlane</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">n</span> <span class="p">)</span>
</span></code></pre></div>
<p>Rhino's <code>Intersection</code> class provides the <code>PlanePlanePlane( )</code>  method for computing the triple-plane intersection, using exactly the same semantics.</p>
<div class="highlight"><pre><span></span><code><span id="__span-8-1"><span class="sd">&#39;&#39;&#39; Triple Plane Intersection</span>
</span><span id="__span-8-2"><span class="sd">&#39;&#39;&#39;</span>
</span><span id="__span-8-3"><span class="n">success</span><span class="p">,</span> <span class="n">point</span> <span class="o">=</span> <span class="ne">Intersection</span><span class="o">.</span><span class="n">PlanePlanePlane</span><span class="p">(</span>
</span><span id="__span-8-4">    <span class="ne">Plane</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">u</span> <span class="p">),</span> <span class="ne">Plane</span><span class="p">(</span> <span class="n">b</span><span class="p">,</span> <span class="n">v</span> <span class="p">),</span> <span class="ne">Plane</span><span class="p">(</span> <span class="n">c</span><span class="p">,</span> <span class="n">n</span> <span class="p">)</span> <span class="p">)</span>
</span></code></pre></div>
<p><a class="md-button" href="../tripleplane.gh">Grasshopper <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 20h14v-2H5m14-9h-4V3H9v6H5l7 7z"/></svg></span></a></p>
</details>
<h2 id="plane-plane">Plane Plane</h2>
<p>Provided with two planes <code>( a, u )</code> and <code>( b, v )</code>, defined by their origin points <code>a</code> and <code>b</code>; and their unit normal vectors <code>u</code> and <code>v</code>, respectively, determine the point of their intersection.</p>
<div class="highlight"><pre><span></span><code><span id="__span-9-1"><span class="sd">&quot;&quot;&quot; Inputs</span>
</span><span id="__span-9-2"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-9-3"><span class="n">a</span><span class="p">,</span> <span class="n">u</span> <span class="o">=</span> <span class="ne">Point3d</span><span class="p">(</span> <span class="n">ax</span><span class="p">,</span> <span class="n">ay</span><span class="p">,</span> <span class="n">az</span> <span class="p">),</span> <span class="ne">Vector3d</span><span class="p">(</span> <span class="n">ux</span><span class="p">,</span> <span class="n">uy</span><span class="p">,</span> <span class="n">uz</span> <span class="p">)</span>
</span><span id="__span-9-4"><span class="n">b</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="ne">Point3d</span><span class="p">(</span> <span class="n">bx</span><span class="p">,</span> <span class="n">by</span><span class="p">,</span> <span class="n">bz</span> <span class="p">),</span> <span class="ne">Vector3d</span><span class="p">(</span> <span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">vz</span> <span class="p">)</span>
</span></code></pre></div>
<details class="solution">
<summary>Solution</summary>
<p>The intersection between two planes, if they are not parallel, produces a line expressing their common points. The direction of the line must be orthogonal to both plane normals, so that the line is in both planes. Therefore, it can be trivially computed by the normals' cross product <code>n = u × v</code>.</p>
<p>The simplest way to find an origin point <code>o</code> for the line of intersection is by reusing the triple-plane method. The third plane's origin <code>c</code> can be defined by either of the two planes' origins <code>a</code> or <code>b</code>, or their mid-point <code>( a + b ) / 2</code>. The direction of the line can be used as the third plane's normal because if the two other planes are not parallel, then the cross product of their normals ensures an orthogonal direction which will not cause problems with the determinant.</p>
<div class="highlight"><pre><span></span><code><span id="__span-10-1"><span class="sd">&#39;&#39;&#39; Plane Plane Intersection</span>
</span><span id="__span-10-2"><span class="sd">&#39;&#39;&#39;</span>
</span><span id="__span-10-3"><span class="k">def</span><span class="w"> </span><span class="nf">PlanePlane</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">epsilon</span> <span class="o">=</span> <span class="mf">1e-10</span> <span class="p">):</span>
</span><span id="__span-10-4">    <span class="n">n</span> <span class="o">=</span> <span class="ne">Vector3d</span><span class="o">.</span><span class="n">CrossProduct</span><span class="p">(</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="p">)</span>
</span><span id="__span-10-5">    <span class="k">if</span><span class="p">(</span> <span class="n">n</span> <span class="o">*</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="n">epsilon</span> <span class="p">):</span>
</span><span id="__span-10-6">        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">n</span>
</span><span id="__span-10-7">    <span class="n">n</span><span class="o">.</span><span class="n">Unitize</span><span class="p">(</span> <span class="p">)</span>
</span><span id="__span-10-8">    <span class="n">c</span> <span class="o">=</span> <span class="p">(</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
</span><span id="__span-10-9">    <span class="n">success</span><span class="p">,</span> <span class="n">o</span> <span class="o">=</span> <span class="n">TriplePlane</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">n</span> <span class="p">)</span>
</span><span id="__span-10-10">    <span class="k">return</span> <span class="n">success</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">n</span>
</span><span id="__span-10-11">
</span><span id="__span-10-12"><span class="n">success</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">PlanePlane</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">v</span> <span class="p">)</span>
</span></code></pre></div>
<p>Alternatively it is possible to derive the intersection from first principles. The system of equations used in the triple-plane intersection captures the relationships the line of intersection should obey, namely its projected distance to both planes must be zero, its direction is the cross product, and its points are free along the line. Replacing the term <code>c · n</code> with a parameter <code>t</code> is equivalent of allowing the point to slide along the line. If we multiply both sides with the inverse of the normal vectors' matrix and expand the result into vector products produces the equation of line.</p>
<div class="highlight"><span class="filename">Math</span><pre><span></span><code><span id="__span-11-1"><span class="p">[</span> <span class="n">u</span><span class="o">.</span><span class="n">X</span>  <span class="n">u</span><span class="o">.</span><span class="n">Y</span>  <span class="n">u</span><span class="o">.</span><span class="n">Z</span> <span class="p">]</span>   <span class="p">[</span> <span class="n">x</span> <span class="p">]</span>   <span class="p">[</span> <span class="n">a</span> <span class="err">·</span> <span class="n">u</span> <span class="p">]</span>
</span><span id="__span-11-2"><span class="p">[</span> <span class="n">v</span><span class="o">.</span><span class="n">X</span>  <span class="n">v</span><span class="o">.</span><span class="n">Y</span>  <span class="n">v</span><span class="o">.</span><span class="n">Z</span> <span class="p">]</span> <span class="err">×</span> <span class="p">[</span> <span class="n">y</span> <span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="n">b</span> <span class="err">·</span> <span class="n">v</span> <span class="p">]</span>
</span><span id="__span-11-3"><span class="p">[</span> <span class="n">n</span><span class="o">.</span><span class="n">X</span>  <span class="n">n</span><span class="o">.</span><span class="n">Y</span>  <span class="n">n</span><span class="o">.</span><span class="n">Z</span> <span class="p">]</span>   <span class="p">[</span> <span class="n">z</span> <span class="p">]</span>   <span class="p">[</span>   <span class="n">t</span>   <span class="p">]</span>
</span><span id="__span-11-4">
</span><span id="__span-11-5"><span class="ow">or</span> <span class="k">with</span> <span class="n">multiplying</span> <span class="n">the</span> <span class="n">inverse</span> <span class="n">of</span> <span class="n">A</span>
</span><span id="__span-11-6">
</span><span id="__span-11-7"><span class="p">[</span> <span class="n">x</span> <span class="p">]</span>   <span class="p">[</span> <span class="n">m</span><span class="o">.</span><span class="n">X</span>  <span class="n">o</span><span class="o">.</span><span class="n">X</span>  <span class="n">w</span><span class="o">.</span><span class="n">X</span> <span class="p">]</span>   <span class="p">[</span> <span class="n">a</span> <span class="err">·</span> <span class="n">u</span> <span class="p">]</span>
</span><span id="__span-11-8"><span class="p">[</span> <span class="n">y</span> <span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="n">m</span><span class="o">.</span><span class="n">Y</span>  <span class="n">o</span><span class="o">.</span><span class="n">Y</span>  <span class="n">w</span><span class="o">.</span><span class="n">Y</span> <span class="p">]</span> <span class="err">×</span> <span class="p">[</span> <span class="n">b</span> <span class="err">·</span> <span class="n">v</span> <span class="p">]</span>
</span><span id="__span-11-9"><span class="p">[</span> <span class="n">z</span> <span class="p">]</span>   <span class="p">[</span> <span class="n">m</span><span class="o">.</span><span class="n">Z</span>  <span class="n">o</span><span class="o">.</span><span class="n">Z</span>  <span class="n">w</span><span class="o">.</span><span class="n">Z</span> <span class="p">]</span>   <span class="p">[</span>   <span class="n">t</span>   <span class="p">]</span>
</span><span id="__span-11-10">
</span><span id="__span-11-11"><span class="ow">or</span> <span class="k">with</span> <span class="n">expanding</span> <span class="n">the</span> <span class="n">vector</span> <span class="n">products</span>
</span><span id="__span-11-12">
</span><span id="__span-11-13">  <span class="n">p</span>  <span class="o">=</span>  <span class="n">m</span> <span class="o">*</span> <span class="p">(</span> <span class="n">a</span> <span class="err">·</span> <span class="n">u</span> <span class="p">)</span> <span class="o">+</span>
</span><span id="__span-11-14">        <span class="n">o</span> <span class="o">*</span> <span class="p">(</span> <span class="n">b</span> <span class="err">·</span> <span class="n">v</span> <span class="p">)</span> <span class="o">+</span>
</span><span id="__span-11-15">        <span class="n">w</span> <span class="o">*</span> <span class="p">(</span>   <span class="n">t</span>   <span class="p">)</span>
</span></code></pre></div>
<p>Note that we do not care about the term <code>w</code> because we already know that the direction of the line is <code>n</code>. All we need to resolve is the origin point <code>m * a · u + o * b · v</code>. The Cramer's rule can be used here to <a href="https://en.wikipedia.org/wiki/Invertible_matrix">invert the matrix</a>, but instead of the repeating the same 3x3 determinant, let's instead replace them with regular vector arithmetic.</p>
<div class="highlight"><span class="filename">The Determinant</span><pre><span></span><code><span id="__span-12-1"><span class="n">d</span> <span class="o">=</span> <span class="p">(</span> <span class="n">u</span><span class="o">.</span><span class="n">X</span> <span class="o">*</span> <span class="p">(</span> <span class="n">v</span><span class="o">.</span><span class="n">Y</span> <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">Z</span> <span class="o">-</span> <span class="n">v</span><span class="o">.</span><span class="n">Z</span> <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">Y</span> <span class="p">)</span> <span class="o">-</span>
</span><span id="__span-12-2">      <span class="n">u</span><span class="o">.</span><span class="n">Y</span> <span class="o">*</span> <span class="p">(</span> <span class="n">v</span><span class="o">.</span><span class="n">X</span> <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">Z</span> <span class="o">-</span> <span class="n">v</span><span class="o">.</span><span class="n">Z</span> <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">X</span> <span class="p">)</span> <span class="o">+</span>
</span><span id="__span-12-3">      <span class="n">u</span><span class="o">.</span><span class="n">Z</span> <span class="o">*</span> <span class="p">(</span> <span class="n">v</span><span class="o">.</span><span class="n">X</span> <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">Y</span> <span class="o">-</span> <span class="n">v</span><span class="o">.</span><span class="n">Y</span> <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">X</span> <span class="p">)</span> <span class="p">)</span>
</span><span id="__span-12-4">
</span><span id="__span-12-5"><span class="ow">or</span> <span class="k">with</span> <span class="n">vector</span> <span class="n">algebra</span>
</span><span id="__span-12-6">
</span><span id="__span-12-7"><span class="n">d</span> <span class="o">=</span> <span class="n">u</span> <span class="o">*</span> <span class="p">(</span> <span class="n">v</span> <span class="err">×</span> <span class="n">n</span> <span class="p">)</span>
</span></code></pre></div>
<p>Moreover, the inverse of the matrix, in terms of its columns, can be reduced to three cross product vectors scaled by the inverse of the determinant. Note that the column vector <code>w</code> is indeed the line's direction <code>n = u × v</code>.</p>
<div class="highlight"><span class="filename">The Matrix Inverse</span><pre><span></span><code><span id="__span-13-1"><span class="n">mxx</span> <span class="o">=</span> <span class="p">(</span> <span class="n">v</span><span class="o">.</span><span class="n">Y</span> <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">Z</span> <span class="o">-</span> <span class="n">v</span><span class="o">.</span><span class="n">Z</span> <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">Y</span> <span class="p">)</span> <span class="o">/</span> <span class="n">d</span>
</span><span id="__span-13-2"><span class="n">mxy</span> <span class="o">=</span> <span class="p">(</span> <span class="n">v</span><span class="o">.</span><span class="n">Z</span> <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">X</span> <span class="o">-</span> <span class="n">v</span><span class="o">.</span><span class="n">X</span> <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">Z</span> <span class="p">)</span> <span class="o">/</span> <span class="n">d</span>
</span><span id="__span-13-3"><span class="n">mxz</span> <span class="o">=</span> <span class="p">(</span> <span class="n">v</span><span class="o">.</span><span class="n">X</span> <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">Y</span> <span class="o">-</span> <span class="n">v</span><span class="o">.</span><span class="n">Y</span> <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">X</span> <span class="p">)</span> <span class="o">/</span> <span class="n">d</span>
</span><span id="__span-13-4">
</span><span id="__span-13-5"><span class="n">oyx</span> <span class="o">=</span> <span class="p">(</span> <span class="n">u</span><span class="o">.</span><span class="n">Z</span> <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">Y</span> <span class="o">-</span> <span class="n">u</span><span class="o">.</span><span class="n">Y</span> <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">Z</span> <span class="p">)</span> <span class="o">/</span> <span class="n">d</span>
</span><span id="__span-13-6"><span class="n">oyy</span> <span class="o">=</span> <span class="p">(</span> <span class="n">u</span><span class="o">.</span><span class="n">X</span> <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">Z</span> <span class="o">-</span> <span class="n">u</span><span class="o">.</span><span class="n">Z</span> <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">X</span> <span class="p">)</span> <span class="o">/</span> <span class="n">d</span>
</span><span id="__span-13-7"><span class="n">oyz</span> <span class="o">=</span> <span class="p">(</span> <span class="n">u</span><span class="o">.</span><span class="n">Y</span> <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">X</span> <span class="o">-</span> <span class="n">u</span><span class="o">.</span><span class="n">X</span> <span class="o">*</span> <span class="n">n</span><span class="o">.</span><span class="n">Y</span> <span class="p">)</span> <span class="o">/</span> <span class="n">d</span>
</span><span id="__span-13-8">
</span><span id="__span-13-9"><span class="n">wzx</span> <span class="o">=</span> <span class="p">(</span> <span class="n">u</span><span class="o">.</span><span class="n">Y</span> <span class="o">*</span> <span class="n">v</span><span class="o">.</span><span class="n">Z</span> <span class="o">-</span> <span class="n">u</span><span class="o">.</span><span class="n">Z</span> <span class="o">*</span> <span class="n">v</span><span class="o">.</span><span class="n">Y</span> <span class="p">)</span> <span class="o">/</span> <span class="n">d</span>
</span><span id="__span-13-10"><span class="n">wzy</span> <span class="o">=</span> <span class="p">(</span> <span class="n">u</span><span class="o">.</span><span class="n">Z</span> <span class="o">*</span> <span class="n">v</span><span class="o">.</span><span class="n">X</span> <span class="o">-</span> <span class="n">u</span><span class="o">.</span><span class="n">X</span> <span class="o">*</span> <span class="n">v</span><span class="o">.</span><span class="n">Z</span> <span class="p">)</span> <span class="o">/</span> <span class="n">d</span>
</span><span id="__span-13-11"><span class="n">wzz</span> <span class="o">=</span> <span class="p">(</span> <span class="n">u</span><span class="o">.</span><span class="n">X</span> <span class="o">*</span> <span class="n">v</span><span class="o">.</span><span class="n">Y</span> <span class="o">-</span> <span class="n">u</span><span class="o">.</span><span class="n">Y</span> <span class="o">*</span> <span class="n">v</span><span class="o">.</span><span class="n">X</span> <span class="p">)</span> <span class="o">/</span> <span class="n">d</span>
</span><span id="__span-13-12">
</span><span id="__span-13-13"><span class="ow">or</span> <span class="k">with</span> <span class="n">vector</span> <span class="n">algebra</span>
</span><span id="__span-13-14">
</span><span id="__span-13-15"><span class="n">m</span> <span class="o">=</span> <span class="p">(</span> <span class="n">v</span> <span class="err">×</span> <span class="n">n</span> <span class="p">)</span> <span class="o">/</span> <span class="n">d</span>
</span><span id="__span-13-16"><span class="n">o</span> <span class="o">=</span> <span class="p">(</span> <span class="n">n</span> <span class="err">×</span> <span class="n">u</span> <span class="p">)</span> <span class="o">/</span> <span class="n">d</span>
</span><span id="__span-13-17"><span class="n">w</span> <span class="o">=</span> <span class="p">(</span> <span class="n">u</span> <span class="err">×</span> <span class="n">v</span> <span class="p">)</span> <span class="o">/</span> <span class="n">d</span>
</span></code></pre></div>
<p>The python code below implements the plane-plane intersection logic using only simple vector algebra operations.</p>
<div class="highlight"><pre><span></span><code><span id="__span-14-1"><span class="sd">&#39;&#39;&#39; Plane Plane Intersection</span>
</span><span id="__span-14-2"><span class="sd">&#39;&#39;&#39;</span>
</span><span id="__span-14-3"><span class="k">def</span><span class="w"> </span><span class="nf">PlanePlane</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">epsilon</span> <span class="o">=</span> <span class="mf">1e-10</span> <span class="p">):</span>
</span><span id="__span-14-4"><span class="w">    </span><span class="sd">&#39;&#39;&#39; Line&#39;s Direction</span>
</span><span id="__span-14-5"><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="__span-14-6">    <span class="n">n</span> <span class="o">=</span> <span class="ne">Vector3d</span><span class="o">.</span><span class="n">CrossProduct</span><span class="p">(</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="p">)</span>
</span><span id="__span-14-7">    <span class="k">if</span><span class="p">(</span> <span class="n">n</span> <span class="o">*</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="n">epsilon</span> <span class="p">):</span>
</span><span id="__span-14-8">        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">n</span>
</span><span id="__span-14-9">    <span class="n">n</span><span class="o">.</span><span class="n">Unitize</span><span class="p">(</span> <span class="p">)</span>
</span><span id="__span-14-10">
</span><span id="__span-14-11"><span class="w">    </span><span class="sd">&#39;&#39;&#39; Compute Determinant</span>
</span><span id="__span-14-12"><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="__span-14-13">    <span class="n">vn</span> <span class="o">=</span> <span class="ne">Vector3d</span><span class="o">.</span><span class="n">CrossProduct</span><span class="p">(</span> <span class="n">v</span><span class="p">,</span> <span class="n">n</span> <span class="p">)</span>
</span><span id="__span-14-14">    <span class="n">nu</span> <span class="o">=</span> <span class="ne">Vector3d</span><span class="o">.</span><span class="n">CrossProduct</span><span class="p">(</span> <span class="n">n</span><span class="p">,</span> <span class="n">u</span> <span class="p">)</span>
</span><span id="__span-14-15">    <span class="n">d</span> <span class="o">=</span> <span class="n">u</span> <span class="o">*</span> <span class="n">vn</span>
</span><span id="__span-14-16">
</span><span id="__span-14-17"><span class="w">    </span><span class="sd">&#39;&#39;&#39; Origin of Line</span>
</span><span id="__span-14-18"><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="__span-14-19">    <span class="n">au</span> <span class="o">=</span> <span class="ne">Vector3d</span><span class="p">(</span> <span class="n">a</span> <span class="p">)</span> <span class="o">*</span> <span class="n">u</span>
</span><span id="__span-14-20">    <span class="n">bv</span> <span class="o">=</span> <span class="ne">Vector3d</span><span class="p">(</span> <span class="n">b</span> <span class="p">)</span> <span class="o">*</span> <span class="n">v</span>
</span><span id="__span-14-21">
</span><span id="__span-14-22">    <span class="n">o</span> <span class="o">=</span> <span class="ne">Point3d</span><span class="p">(</span> <span class="n">au</span> <span class="o">*</span> <span class="n">vn</span> <span class="o">/</span> <span class="n">d</span> <span class="o">+</span>
</span><span id="__span-14-23">                 <span class="n">bv</span> <span class="o">*</span> <span class="n">nu</span> <span class="o">/</span> <span class="n">d</span> <span class="p">)</span>
</span><span id="__span-14-24">    <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">n</span>
</span></code></pre></div>
<p>Rhino's <code>Intersection</code> class provides the <code>PlanePlane( )</code> method for computing the intersection between two planes, with the same semantics.</p>
<div class="highlight"><pre><span></span><code><span id="__span-15-1"><span class="sd">&#39;&#39;&#39; Plane Plane Intersection</span>
</span><span id="__span-15-2"><span class="sd">&#39;&#39;&#39;</span>
</span><span id="__span-15-3"><span class="n">success</span><span class="p">,</span> <span class="n">line</span> <span class="o">=</span> <span class="ne">Intersection</span><span class="o">.</span><span class="n">PlanePlane</span><span class="p">(</span>
</span><span id="__span-15-4">    <span class="ne">Plane</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">u</span> <span class="p">),</span>
</span><span id="__span-15-5">    <span class="ne">Plane</span><span class="p">(</span> <span class="n">b</span><span class="p">,</span> <span class="n">v</span> <span class="p">)</span> <span class="p">)</span>
</span></code></pre></div>
<p><a class="md-button" href="../planeplane.gh">Grasshopper <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 20h14v-2H5m14-9h-4V3H9v6H5l7 7z"/></svg></span></a></p>
</details>
<h2 id="line-line-fast">Line Line (Fast)</h2>
<p>Provided with two lines <code>( a, b )</code> and <code>( c, d )</code> defined by two points each, determine the point of their intersection. Assume that the intersection exists.</p>
<div class="highlight"><pre><span></span><code><span id="__span-16-1"><span class="sd">&quot;&quot;&quot; Inputs</span>
</span><span id="__span-16-2"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-16-3"><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="ne">Point3d</span><span class="p">(</span> <span class="n">ax</span><span class="p">,</span> <span class="n">ay</span><span class="p">,</span> <span class="n">az</span> <span class="p">),</span> <span class="ne">Point3d</span><span class="p">(</span> <span class="n">bx</span><span class="p">,</span> <span class="n">by</span><span class="p">,</span> <span class="n">bz</span> <span class="p">)</span>
</span><span id="__span-16-4"><span class="n">c</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="ne">Point3d</span><span class="p">(</span> <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">,</span> <span class="n">cz</span> <span class="p">),</span> <span class="ne">Point3d</span><span class="p">(</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">dz</span> <span class="p">)</span>
</span></code></pre></div>
<details class="solution">
<summary>Solution</summary>
<h4 id="constructive-geometry">Constructive Geometry</h4>
<p>Intersection between two lines can be approached in a constructive geometry sense without need for algebraic transformations. This is performed by using the concept of mapping between global to local coordinates: (1) The line <code>a-&gt;b</code> and the line <code>a-&gt;c</code> are used to establish an orthonormal basis <code>( a, u, v, n )</code>. (2) The line <code>c-&gt;d</code> can be expressed in 2D local coordinates <code>C-&gt;D</code> in the <code>( a, u, v )</code> plane. (3) Finally, the point of intersection between the <code>u</code>-axis and <code>C-&gt;D</code> line is computed using the similar triangles ratios.</p>
<div class="highlight"><pre><span></span><code><span id="__span-17-1"><span class="sd">&#39;&#39;&#39; Constructive Intersection</span>
</span><span id="__span-17-2"><span class="sd">&#39;&#39;&#39;</span>
</span><span id="__span-17-3"><span class="k">def</span><span class="w"> </span><span class="nf">LineLineFast</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span> <span class="p">):</span>
</span><span id="__span-17-4"><span class="w">    </span><span class="sd">&#39;&#39;&#39; Orthonormal ( a, b, c ) Basis</span>
</span><span id="__span-17-5"><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="__span-17-6">    <span class="n">u</span> <span class="o">=</span> <span class="n">b</span> <span class="o">-</span> <span class="n">a</span>
</span><span id="__span-17-7">    <span class="n">n</span> <span class="o">=</span> <span class="ne">Vector3d</span><span class="o">.</span><span class="n">CrossProduct</span><span class="p">(</span> <span class="n">u</span><span class="p">,</span> <span class="n">c</span> <span class="o">-</span> <span class="n">a</span> <span class="p">)</span>
</span><span id="__span-17-8">    <span class="n">v</span> <span class="o">=</span> <span class="ne">Vector3d</span><span class="o">.</span><span class="n">CrossProduct</span><span class="p">(</span> <span class="n">n</span><span class="p">,</span> <span class="n">u</span> <span class="p">)</span>
</span><span id="__span-17-9">
</span><span id="__span-17-10">    <span class="n">u</span><span class="o">.</span><span class="n">Unitize</span><span class="p">(</span> <span class="p">)</span>
</span><span id="__span-17-11">    <span class="n">v</span><span class="o">.</span><span class="n">Unitize</span><span class="p">(</span> <span class="p">)</span>
</span><span id="__span-17-12">    <span class="n">n</span><span class="o">.</span><span class="n">Unitize</span><span class="p">(</span> <span class="p">)</span>
</span><span id="__span-17-13">
</span><span id="__span-17-14"><span class="w">    </span><span class="sd">&#39;&#39;&#39; World to Local Mapping</span>
</span><span id="__span-17-15"><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="__span-17-16">    <span class="n">C</span> <span class="o">=</span> <span class="ne">Point3d</span><span class="p">(</span> <span class="n">u</span> <span class="o">*</span> <span class="p">(</span> <span class="n">c</span> <span class="o">-</span> <span class="n">a</span> <span class="p">),</span> <span class="n">v</span> <span class="o">*</span> <span class="p">(</span> <span class="n">c</span> <span class="o">-</span> <span class="n">a</span> <span class="p">),</span> <span class="mi">0</span> <span class="p">)</span>
</span><span id="__span-17-17">    <span class="n">D</span> <span class="o">=</span> <span class="ne">Point3d</span><span class="p">(</span> <span class="n">u</span> <span class="o">*</span> <span class="p">(</span> <span class="n">d</span> <span class="o">-</span> <span class="n">a</span> <span class="p">),</span> <span class="n">v</span> <span class="o">*</span> <span class="p">(</span> <span class="n">d</span> <span class="o">-</span> <span class="n">a</span> <span class="p">),</span> <span class="mi">0</span> <span class="p">)</span>
</span><span id="__span-17-18">
</span><span id="__span-17-19"><span class="w">    </span><span class="sd">&#39;&#39;&#39; Similar Triangles</span>
</span><span id="__span-17-20"><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="__span-17-21">    <span class="n">t</span> <span class="o">=</span> <span class="p">(</span> <span class="n">D</span><span class="o">.</span><span class="n">Y</span> <span class="o">*</span> <span class="n">C</span><span class="o">.</span><span class="n">X</span> <span class="o">-</span> <span class="n">D</span><span class="o">.</span><span class="n">X</span> <span class="o">*</span> <span class="n">C</span><span class="o">.</span><span class="n">Y</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="n">D</span><span class="o">.</span><span class="n">Y</span> <span class="o">-</span> <span class="n">C</span><span class="o">.</span><span class="n">Y</span> <span class="p">)</span>
</span><span id="__span-17-22">    <span class="k">return</span> <span class="n">t</span> <span class="o">/</span> <span class="n">a</span><span class="o">.</span><span class="n">DistanceTo</span><span class="p">(</span> <span class="n">b</span> <span class="p">)</span>
</span><span id="__span-17-23">
</span><span id="__span-17-24"><span class="n">t</span> <span class="o">=</span> <span class="n">LineLineFast</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span> <span class="p">)</span>
</span><span id="__span-17-25"><span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;t: </span><span class="si">{:&gt;8.5f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span> <span class="p">)</span>
</span><span id="__span-17-26"><span class="n">p</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">t</span> <span class="p">)</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">t</span>
</span></code></pre></div>
<h4 id="symbolic-perspective">Symbolic Perspective</h4>
<p>Symbolically there are quite a few different ways to compute the point of intersection. We consider two points at parameters <code>s</code> and <code>t</code> on the lines <code>a-&gt;b</code> and <code>c-&gt;d</code>, respectively. The two points are <code>p = a * ( 1 - s ) + b * s</code> and <code>q = c * ( 1 - t ) + d * t</code> must be  equal <code>p = q</code> for the lines to intersect. Substituting the point equations yields <code>a * ( 1 - s ) + b * s = c * ( 1 - t ) + d * t</code> or simply <code>a + ( b - a ) * s = c + ( d - c ) * t</code>.</p>
<p>Since the points <code>a</code>, <code>b</code>, <code>c</code> and <code>d</code> are known, we can define the vectors <code>u = b - a</code>, <code>v = d - c</code> and <code>w = c - a</code> to simplify the expression to <code>u * s - v * t = w</code>. Therefore, we have one equation with two unknowns. The points <code>p</code> and <code>q</code> can be situated anywhere on the lines so we need to constraint them based on some geometric principle. To solve this we either (1) need at least one more equation to solve a 2x2 system, (2) apply a distance constraint such as <code>|p - q| = 0</code>, or (3) perform some symbolic trick to get rid of one unknown, such as either <code>u * s</code> or <code>v * t</code>.</p>
<h5 id="geometric-constraints">Geometric Constraints</h5>
<p>One way of thinking about this is by requiring that the line <code>p-&gt;q</code> is perpendicular to both <code>a-&gt;b</code> and <code>c-&gt;d</code>. If this is the case then <code>p</code> and <code>q</code> are the closest points between the lines. Therefore, if the lines do intersect, then <code>p</code> and <code>q</code> they must be coincident. This can be expressed using the dot product as <code>u · ( q - p ) = 0</code> and at the same time <code>v · ( q - p ) = 0</code>. But <code>q - p = w + v * t - u * s</code>, thus expanding the above yields two equations with two unknown. Note that the coefficients of <code>s</code> and <code>t</code> are easily computed dot products.</p>
<div class="highlight"><span class="filename">Math</span><pre><span></span><code><span id="__span-18-1"><span class="n">u</span> <span class="err">·</span> <span class="p">(</span> <span class="n">q</span> <span class="o">-</span> <span class="n">p</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-18-2"><span class="n">v</span> <span class="err">·</span> <span class="p">(</span> <span class="n">q</span> <span class="o">-</span> <span class="n">p</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-18-3">
</span><span id="__span-18-4"><span class="ow">or</span> <span class="k">with</span> <span class="n">substituting</span>
</span><span id="__span-18-5">
</span><span id="__span-18-6"><span class="n">u</span> <span class="err">·</span> <span class="p">(</span> <span class="n">w</span> <span class="o">+</span> <span class="n">v</span> <span class="o">*</span> <span class="n">t</span> <span class="o">-</span> <span class="n">u</span> <span class="o">*</span> <span class="n">s</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-18-7"><span class="n">v</span> <span class="err">·</span> <span class="p">(</span> <span class="n">w</span> <span class="o">+</span> <span class="n">v</span> <span class="o">*</span> <span class="n">t</span> <span class="o">-</span> <span class="n">u</span> <span class="o">*</span> <span class="n">s</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-18-8">
</span><span id="__span-18-9"><span class="ow">or</span> <span class="k">with</span> <span class="n">expanding</span>
</span><span id="__span-18-10">
</span><span id="__span-18-11"><span class="n">uw</span> <span class="o">+</span> <span class="n">uv</span> <span class="o">*</span> <span class="n">t</span> <span class="o">-</span> <span class="n">uu</span> <span class="o">*</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-18-12"><span class="n">vw</span> <span class="o">+</span> <span class="n">vv</span> <span class="o">*</span> <span class="n">t</span> <span class="o">-</span> <span class="n">vu</span> <span class="o">*</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-18-13">
</span><span id="__span-18-14"><span class="ow">or</span> <span class="k">with</span> <span class="n">solving</span>
</span><span id="__span-18-15">
</span><span id="__span-18-16"><span class="n">s</span> <span class="o">=</span> <span class="p">(</span> <span class="n">uv</span> <span class="o">*</span> <span class="n">vw</span> <span class="o">-</span> <span class="n">vv</span> <span class="o">*</span> <span class="n">uw</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="n">uv</span> <span class="o">*</span> <span class="n">uv</span> <span class="o">-</span> <span class="n">vv</span> <span class="o">*</span> <span class="n">uu</span> <span class="p">)</span>
</span><span id="__span-18-17"><span class="n">t</span> <span class="o">=</span> <span class="p">(</span> <span class="n">uu</span> <span class="o">*</span> <span class="n">vw</span> <span class="o">-</span> <span class="n">uv</span> <span class="o">*</span> <span class="n">uw</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="n">uv</span> <span class="o">*</span> <span class="n">uv</span> <span class="o">-</span> <span class="n">vv</span> <span class="o">*</span> <span class="n">uu</span> <span class="p">)</span>
</span></code></pre></div>
<p>This approach is based on <a href="https://web.archive.org/web/20210410192029/http://geomalgorithms.com/a07-_distance.html#Distance-between-Lines">Daniel Sunday's</a> derivation. The python code below reflects this process minimally without considering special cases and potential geometric and numerical issues involved.</p>
<div class="highlight"><pre><span></span><code><span id="__span-19-1"><span class="k">def</span><span class="w"> </span><span class="nf">LineLineFast</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span> <span class="p">):</span>
</span><span id="__span-19-2">    <span class="n">u</span> <span class="o">=</span> <span class="n">b</span> <span class="o">-</span> <span class="n">a</span>
</span><span id="__span-19-3">    <span class="n">v</span> <span class="o">=</span> <span class="n">d</span> <span class="o">-</span> <span class="n">c</span>
</span><span id="__span-19-4">    <span class="n">w</span> <span class="o">=</span> <span class="n">c</span> <span class="o">-</span> <span class="n">a</span>
</span><span id="__span-19-5">
</span><span id="__span-19-6">    <span class="n">uu</span> <span class="o">=</span> <span class="n">u</span> <span class="o">*</span> <span class="n">u</span>
</span><span id="__span-19-7">    <span class="n">uv</span> <span class="o">=</span> <span class="n">u</span> <span class="o">*</span> <span class="n">v</span>
</span><span id="__span-19-8">    <span class="n">vv</span> <span class="o">=</span> <span class="n">v</span> <span class="o">*</span> <span class="n">v</span>
</span><span id="__span-19-9">    <span class="n">uw</span> <span class="o">=</span> <span class="n">u</span> <span class="o">*</span> <span class="n">w</span>
</span><span id="__span-19-10">    <span class="n">vw</span> <span class="o">=</span> <span class="n">v</span> <span class="o">*</span> <span class="n">w</span>
</span><span id="__span-19-11">
</span><span id="__span-19-12">    <span class="n">s</span> <span class="o">=</span> <span class="p">(</span> <span class="n">uv</span> <span class="o">*</span> <span class="n">vw</span> <span class="o">-</span> <span class="n">vv</span> <span class="o">*</span> <span class="n">uw</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="n">uv</span> <span class="o">*</span> <span class="n">uv</span> <span class="o">-</span> <span class="n">vv</span> <span class="o">*</span> <span class="n">uu</span> <span class="p">)</span>
</span><span id="__span-19-13">    <span class="n">t</span> <span class="o">=</span> <span class="p">(</span> <span class="n">uu</span> <span class="o">*</span> <span class="n">vw</span> <span class="o">-</span> <span class="n">uv</span> <span class="o">*</span> <span class="n">uw</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="n">uv</span> <span class="o">*</span> <span class="n">uv</span> <span class="o">-</span> <span class="n">vv</span> <span class="o">*</span> <span class="n">uu</span> <span class="p">)</span>
</span><span id="__span-19-14">    <span class="k">return</span> <span class="n">s</span><span class="p">,</span> <span class="n">t</span>
</span></code></pre></div>
<h5 id="calculous-minimization">Calculous / Minimization</h5>
<p>Requiring that the distance between the points <code>p</code> and <code>q</code> is zero, yields an unpleasant relationship <code>|q - p| = 0</code> involving square roots. However, we can approach this as a minimization problem instead. This requires setting the partial derivatives <code>θs( |q - p| ** 2 ) = 0</code> and <code>θt( |q - p| ** 2 ) = 0</code>. The square of the distance between points is equivalent to the dot product of the vectors <code>( q - p ) · ( q - p )</code>. Performing the requisite algebra yields a quadratic expression seen below.</p>
<div class="highlight"><span class="filename">Math</span><pre><span></span><code><span id="__span-20-1"><span class="p">(</span> <span class="n">q</span> <span class="o">-</span> <span class="n">p</span> <span class="p">)</span> <span class="err">·</span> <span class="p">(</span> <span class="n">q</span> <span class="o">-</span> <span class="n">p</span> <span class="p">)</span>
</span><span id="__span-20-2">
</span><span id="__span-20-3"><span class="ow">or</span> <span class="k">with</span> <span class="n">substituting</span>
</span><span id="__span-20-4">
</span><span id="__span-20-5"><span class="p">(</span> <span class="n">w</span> <span class="o">+</span> <span class="n">v</span> <span class="o">*</span> <span class="n">t</span> <span class="o">-</span> <span class="n">u</span> <span class="o">*</span> <span class="n">s</span> <span class="p">)</span> <span class="err">·</span> <span class="p">(</span> <span class="n">w</span> <span class="o">+</span> <span class="n">v</span> <span class="o">*</span> <span class="n">t</span> <span class="o">-</span> <span class="n">u</span> <span class="o">*</span> <span class="n">s</span> <span class="p">)</span>
</span><span id="__span-20-6">
</span><span id="__span-20-7"><span class="ow">or</span> <span class="k">with</span> <span class="n">expanding</span>
</span><span id="__span-20-8">
</span><span id="__span-20-9"><span class="n">w</span> <span class="err">·</span> <span class="n">w</span>     <span class="o">+</span> <span class="n">w</span> <span class="err">·</span> <span class="n">v</span> <span class="o">*</span> <span class="n">t</span>     <span class="o">-</span> <span class="n">w</span> <span class="err">·</span> <span class="n">u</span> <span class="o">*</span> <span class="n">s</span>     <span class="o">+</span>
</span><span id="__span-20-10"><span class="n">w</span> <span class="err">·</span> <span class="n">v</span> <span class="o">*</span> <span class="n">t</span> <span class="o">+</span> <span class="n">v</span> <span class="err">·</span> <span class="n">v</span> <span class="o">*</span> <span class="n">t</span> <span class="o">*</span> <span class="n">t</span> <span class="o">-</span> <span class="n">u</span> <span class="err">·</span> <span class="n">v</span> <span class="o">*</span> <span class="n">s</span> <span class="o">*</span> <span class="n">t</span> <span class="o">-</span>
</span><span id="__span-20-11"><span class="n">w</span> <span class="err">·</span> <span class="n">u</span> <span class="o">*</span> <span class="n">s</span> <span class="o">-</span> <span class="n">u</span> <span class="err">·</span> <span class="n">v</span> <span class="o">*</span> <span class="n">s</span> <span class="o">*</span> <span class="n">t</span> <span class="o">+</span> <span class="n">u</span> <span class="err">·</span> <span class="n">u</span> <span class="o">*</span> <span class="n">s</span> <span class="o">*</span> <span class="n">s</span>
</span><span id="__span-20-12">
</span><span id="__span-20-13"><span class="ow">or</span> <span class="k">with</span> <span class="n">combining</span>
</span><span id="__span-20-14">
</span><span id="__span-20-15"><span class="n">u</span> <span class="err">·</span> <span class="n">u</span> <span class="o">*</span> <span class="n">s</span> <span class="o">*</span> <span class="n">s</span> <span class="o">+</span>
</span><span id="__span-20-16"><span class="n">v</span> <span class="err">·</span> <span class="n">v</span> <span class="o">*</span> <span class="n">t</span> <span class="o">*</span> <span class="n">t</span> <span class="o">-</span>
</span><span id="__span-20-17"><span class="n">u</span> <span class="err">·</span> <span class="n">v</span> <span class="o">*</span> <span class="n">s</span> <span class="o">*</span> <span class="n">t</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span>
</span><span id="__span-20-18"><span class="n">u</span> <span class="err">·</span> <span class="n">w</span> <span class="o">*</span> <span class="n">s</span>     <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span>
</span><span id="__span-20-19"><span class="n">v</span> <span class="err">·</span> <span class="n">w</span> <span class="o">*</span>     <span class="n">t</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span>
</span><span id="__span-20-20"><span class="n">w</span> <span class="err">·</span> <span class="n">w</span>
</span></code></pre></div>
<p>The partial derivatives of this expression with respect to <code>s</code> and <code>t</code>, drop a degree and create a system of two linear equations with two unknowns. Note that this is exactly the same linear system seen earlier.</p>
<div class="highlight"><span class="filename">Math</span><pre><span></span><code><span id="__span-21-1"><span class="n">θs</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-21-2"><span class="n">θt</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-21-3">
</span><span id="__span-21-4"><span class="ow">or</span> <span class="k">with</span> <span class="n">differentiating</span>
</span><span id="__span-21-5">
</span><span id="__span-21-6"><span class="n">u</span> <span class="err">·</span> <span class="n">u</span> <span class="o">*</span> <span class="n">s</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">u</span> <span class="err">·</span> <span class="n">v</span> <span class="o">*</span> <span class="n">t</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">u</span> <span class="err">·</span> <span class="n">w</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-21-7"><span class="n">v</span> <span class="err">·</span> <span class="n">v</span> <span class="o">*</span> <span class="n">t</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">u</span> <span class="err">·</span> <span class="n">v</span> <span class="o">*</span> <span class="n">s</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">v</span> <span class="err">·</span> <span class="n">w</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-21-8">
</span><span id="__span-21-9"><span class="ow">or</span> <span class="k">with</span> <span class="n">compacting</span>
</span><span id="__span-21-10">
</span><span id="__span-21-11"><span class="n">uu</span> <span class="o">*</span> <span class="n">s</span> <span class="o">-</span> <span class="n">uv</span> <span class="o">*</span> <span class="n">t</span> <span class="o">-</span> <span class="n">uw</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-21-12"><span class="n">vv</span> <span class="o">*</span> <span class="n">t</span> <span class="o">-</span> <span class="n">uv</span> <span class="o">*</span> <span class="n">s</span> <span class="o">+</span> <span class="n">vw</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-21-13">
</span><span id="__span-21-14"><span class="ow">or</span> <span class="k">with</span> <span class="n">solving</span>
</span><span id="__span-21-15">
</span><span id="__span-21-16"><span class="n">s</span> <span class="o">=</span> <span class="p">(</span> <span class="n">uv</span> <span class="o">*</span> <span class="n">vw</span> <span class="o">-</span> <span class="n">vv</span> <span class="o">*</span> <span class="n">uw</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="n">uv</span> <span class="o">*</span> <span class="n">uv</span> <span class="o">-</span> <span class="n">vv</span> <span class="o">*</span> <span class="n">uu</span> <span class="p">)</span>
</span><span id="__span-21-17"><span class="n">t</span> <span class="o">=</span> <span class="p">(</span> <span class="n">uu</span> <span class="o">*</span> <span class="n">vw</span> <span class="o">-</span> <span class="n">uv</span> <span class="o">*</span> <span class="n">uw</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="n">uv</span> <span class="o">*</span> <span class="n">uv</span> <span class="o">-</span> <span class="n">vv</span> <span class="o">*</span> <span class="n">uu</span> <span class="p">)</span>
</span></code></pre></div>
<h5 id="algebraic-perspective">Algebraic Perspective</h5>
<p>Alternatively, we can get rid of one unknown in the equation <code>u * s - v * t = w</code> by multiplying, in the cross product sense, with <code>u</code> or <code>v</code>. This is because the cross product with a vector and itself is the zero vector. Therefore, we arrive at two vector-scalar product expressions as seen below.</p>
<div class="highlight"><span class="filename">Math</span><pre><span></span><code><span id="__span-22-1"><span class="n">u</span> <span class="o">*</span> <span class="n">s</span> <span class="o">-</span> <span class="n">v</span> <span class="o">*</span> <span class="n">t</span> <span class="o">=</span> <span class="n">w</span>
</span><span id="__span-22-2">
</span><span id="__span-22-3"><span class="ow">or</span> <span class="k">with</span> <span class="n">crossing</span>
</span><span id="__span-22-4">
</span><span id="__span-22-5"><span class="n">v</span> <span class="err">×</span> <span class="p">(</span> <span class="n">u</span> <span class="o">*</span> <span class="n">s</span> <span class="o">-</span> <span class="n">v</span> <span class="o">*</span> <span class="n">t</span> <span class="p">)</span> <span class="o">=</span> <span class="n">v</span> <span class="err">×</span> <span class="n">w</span>
</span><span id="__span-22-6"><span class="n">u</span> <span class="err">×</span> <span class="p">(</span> <span class="n">u</span> <span class="o">*</span> <span class="n">s</span> <span class="o">-</span> <span class="n">v</span> <span class="o">*</span> <span class="n">t</span> <span class="p">)</span> <span class="o">=</span> <span class="n">u</span> <span class="err">×</span> <span class="n">w</span>
</span><span id="__span-22-7">
</span><span id="__span-22-8"><span class="ow">or</span> <span class="k">with</span> <span class="n">expanding</span>
</span><span id="__span-22-9">
</span><span id="__span-22-10"><span class="n">v</span> <span class="err">×</span> <span class="n">u</span> <span class="o">*</span> <span class="n">s</span> <span class="o">-</span> <span class="n">v</span> <span class="err">×</span> <span class="n">v</span> <span class="o">*</span> <span class="n">t</span> <span class="o">=</span> <span class="n">v</span> <span class="err">×</span> <span class="n">w</span>
</span><span id="__span-22-11"><span class="n">u</span> <span class="err">×</span> <span class="n">u</span> <span class="o">*</span> <span class="n">s</span> <span class="o">-</span> <span class="n">u</span> <span class="err">×</span> <span class="n">v</span> <span class="o">*</span> <span class="n">t</span> <span class="o">=</span> <span class="n">u</span> <span class="err">×</span> <span class="n">w</span>
</span><span id="__span-22-12">
</span><span id="__span-22-13"><span class="ow">or</span> <span class="k">with</span> <span class="n">eliminating</span>
</span><span id="__span-22-14">
</span><span id="__span-22-15"><span class="n">v</span> <span class="err">×</span> <span class="n">u</span> <span class="o">*</span> <span class="n">s</span>             <span class="o">=</span> <span class="n">v</span> <span class="err">×</span> <span class="n">w</span>
</span><span id="__span-22-16">          <span class="o">-</span> <span class="n">u</span> <span class="err">×</span> <span class="n">v</span> <span class="o">*</span> <span class="n">t</span> <span class="o">=</span> <span class="n">u</span> <span class="err">×</span> <span class="n">w</span>
</span><span id="__span-22-17">
</span><span id="__span-22-18"><span class="ow">or</span> <span class="k">with</span> <span class="n">reordering</span>
</span><span id="__span-22-19">
</span><span id="__span-22-20"><span class="n">u</span> <span class="err">×</span> <span class="n">v</span> <span class="o">*</span> <span class="n">s</span> <span class="o">=</span> <span class="n">w</span> <span class="err">×</span> <span class="n">v</span>
</span><span id="__span-22-21"><span class="n">u</span> <span class="err">×</span> <span class="n">v</span> <span class="o">*</span> <span class="n">t</span> <span class="o">=</span> <span class="n">w</span> <span class="err">×</span> <span class="n">u</span>
</span></code></pre></div>
<p>Finally, to drop from an equation between vectors and scalars we multiply, in the dot product sense, with <code>u × v</code>. Note that the vector being dotted must not be parallel to the terms involved, otherwise we are introducing zeros. The normal vector <code>n = u × v</code> is safe because it is orthogonal to <code>u</code>, <code>v</code> and <code>w</code>.</p>
<div class="highlight"><span class="filename">Math</span><pre><span></span><code><span id="__span-23-1"><span class="n">u</span> <span class="err">×</span> <span class="n">v</span> <span class="o">*</span> <span class="n">s</span> <span class="o">=</span> <span class="n">w</span> <span class="err">×</span> <span class="n">v</span>
</span><span id="__span-23-2"><span class="n">u</span> <span class="err">×</span> <span class="n">v</span> <span class="o">*</span> <span class="n">t</span> <span class="o">=</span> <span class="n">w</span> <span class="err">×</span> <span class="n">u</span>
</span><span id="__span-23-3">
</span><span id="__span-23-4"><span class="ow">or</span> <span class="k">with</span> <span class="n">n</span> <span class="o">=</span> <span class="n">u</span> <span class="err">×</span> <span class="n">v</span>
</span><span id="__span-23-5">
</span><span id="__span-23-6"><span class="n">n</span> <span class="o">*</span> <span class="n">s</span> <span class="o">=</span> <span class="n">w</span> <span class="err">×</span> <span class="n">v</span>
</span><span id="__span-23-7"><span class="n">n</span> <span class="o">*</span> <span class="n">t</span> <span class="o">=</span> <span class="n">w</span> <span class="err">×</span> <span class="n">u</span>
</span><span id="__span-23-8">
</span><span id="__span-23-9"><span class="ow">or</span> <span class="k">with</span> <span class="n">dotting</span>
</span><span id="__span-23-10">
</span><span id="__span-23-11"><span class="n">n</span> <span class="err">·</span> <span class="n">n</span> <span class="o">*</span> <span class="n">s</span> <span class="o">=</span> <span class="p">(</span> <span class="n">w</span> <span class="err">×</span> <span class="n">v</span> <span class="p">)</span> <span class="err">·</span> <span class="n">n</span>
</span><span id="__span-23-12"><span class="n">n</span> <span class="err">·</span> <span class="n">n</span> <span class="o">*</span> <span class="n">t</span> <span class="o">=</span> <span class="p">(</span> <span class="n">w</span> <span class="err">×</span> <span class="n">u</span> <span class="p">)</span> <span class="err">·</span> <span class="n">n</span>
</span><span id="__span-23-13">
</span><span id="__span-23-14"><span class="ow">or</span> <span class="k">with</span> <span class="n">solving</span>
</span><span id="__span-23-15">
</span><span id="__span-23-16"><span class="n">s</span> <span class="o">=</span> <span class="p">(</span> <span class="p">(</span> <span class="n">w</span> <span class="err">×</span> <span class="n">v</span> <span class="p">)</span> <span class="err">·</span> <span class="n">n</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="n">n</span> <span class="err">·</span> <span class="n">n</span> <span class="p">)</span>
</span><span id="__span-23-17"><span class="n">t</span> <span class="o">=</span> <span class="p">(</span> <span class="p">(</span> <span class="n">w</span> <span class="err">×</span> <span class="n">u</span> <span class="p">)</span> <span class="err">·</span> <span class="n">n</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="n">n</span> <span class="err">·</span> <span class="n">n</span> <span class="p">)</span>
</span></code></pre></div>
<p>This approach is based on <a href="https://www.wiley.com/en-us/Mathematical+Structures+for+Computer+Graphics-p-9781118712191">Steven Jenke's</a> derivation. The python code below reflects this process minimally without considering special cases and potential geometric and numerical issues involved.</p>
<div class="highlight"><pre><span></span><code><span id="__span-24-1"><span class="sd">&#39;&#39;&#39; Line and Line Intersection</span>
</span><span id="__span-24-2"><span class="sd">&#39;&#39;&#39;</span>
</span><span id="__span-24-3"><span class="k">def</span><span class="w"> </span><span class="nf">LineLineFast</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span> <span class="p">):</span>
</span><span id="__span-24-4">    <span class="n">u</span> <span class="o">=</span> <span class="n">b</span> <span class="o">-</span> <span class="n">a</span>
</span><span id="__span-24-5">    <span class="n">v</span> <span class="o">=</span> <span class="n">d</span> <span class="o">-</span> <span class="n">c</span>
</span><span id="__span-24-6">    <span class="n">w</span> <span class="o">=</span> <span class="n">c</span> <span class="o">-</span> <span class="n">a</span>
</span><span id="__span-24-7">    <span class="n">n</span> <span class="o">=</span> <span class="ne">Vector3d</span><span class="o">.</span><span class="n">CrossProduct</span><span class="p">(</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="p">)</span>
</span><span id="__span-24-8">    <span class="n">s</span> <span class="o">=</span> <span class="ne">Vector3d</span><span class="o">.</span><span class="n">CrossProduct</span><span class="p">(</span> <span class="n">w</span><span class="p">,</span> <span class="n">v</span> <span class="p">)</span> <span class="o">*</span> <span class="n">n</span> <span class="o">/</span> <span class="p">(</span> <span class="n">n</span> <span class="o">*</span> <span class="n">n</span> <span class="p">)</span>
</span><span id="__span-24-9">    <span class="n">t</span> <span class="o">=</span> <span class="ne">Vector3d</span><span class="o">.</span><span class="n">CrossProduct</span><span class="p">(</span> <span class="n">w</span><span class="p">,</span> <span class="n">u</span> <span class="p">)</span> <span class="o">*</span> <span class="n">n</span> <span class="o">/</span> <span class="p">(</span> <span class="n">n</span> <span class="o">*</span> <span class="n">n</span> <span class="p">)</span>
</span><span id="__span-24-10">    <span class="k">return</span> <span class="n">s</span><span class="p">,</span> <span class="n">t</span>
</span><span id="__span-24-11">
</span><span id="__span-24-12"><span class="n">s</span><span class="p">,</span> <span class="n">t</span> <span class="o">=</span> <span class="n">LineLineFast</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span> <span class="p">)</span>
</span><span id="__span-24-13"><span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;s: </span><span class="si">{:&gt;8.5f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="n">s</span> <span class="p">)</span> <span class="p">)</span>
</span><span id="__span-24-14"><span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;t: </span><span class="si">{:&gt;8.5f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span> <span class="p">)</span>
</span></code></pre></div>
<h4 id="rhino-intersection">Rhino Intersection</h4>
<p>Rhino's <code>Intersection</code> class supports computing the intersection between two lines using the <code>LineLine( )</code> static method. The method returns a success / failure status code, as well as the two parameters of lines where the lines intersect, if they are on the same plane.</p>
<div class="highlight"><pre><span></span><code><span id="__span-25-1"><span class="sd">&quot;&quot;&quot; Outputs</span>
</span><span id="__span-25-2"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-25-3"><span class="kn">from</span><span class="w"> </span><span class="nn">Rhino.Geometry.Intersect</span><span class="w"> </span><span class="kn">import</span> <span class="ne">Intersection</span>
</span><span id="__span-25-4">
</span><span id="__span-25-5"><span class="n">success</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">t</span> <span class="o">=</span> <span class="ne">Intersection</span><span class="o">.</span><span class="n">LineLine</span><span class="p">(</span>
</span><span id="__span-25-6">    <span class="ne">Line</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="p">),</span>
</span><span id="__span-25-7">    <span class="ne">Line</span><span class="p">(</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span> <span class="p">)</span> <span class="p">)</span>
</span><span id="__span-25-8">
</span><span id="__span-25-9"><span class="k">if</span><span class="p">(</span> <span class="n">success</span> <span class="p">):</span>
</span><span id="__span-25-10">    <span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;Success&#39;</span> <span class="p">)</span>
</span><span id="__span-25-11">    <span class="n">p</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">s</span> <span class="p">)</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">s</span>
</span><span id="__span-25-12">    <span class="n">q</span> <span class="o">=</span> <span class="n">c</span> <span class="o">*</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">t</span> <span class="p">)</span> <span class="o">+</span> <span class="n">d</span> <span class="o">*</span> <span class="n">t</span>
</span><span id="__span-25-13"><span class="k">else</span><span class="p">:</span>
</span><span id="__span-25-14">    <span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;Failure&#39;</span> <span class="p">)</span>
</span><span id="__span-25-15">
</span><span id="__span-25-16"><span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;s: </span><span class="si">{:&gt;8.5f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="n">s</span> <span class="p">)</span> <span class="p">)</span>
</span><span id="__span-25-17"><span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;t: </span><span class="si">{:&gt;8.5f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span> <span class="p">)</span>
</span></code></pre></div>
<p><a class="md-button" href="../lineline.gh">Grasshopper <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 20h14v-2H5m14-9h-4V3H9v6H5l7 7z"/></svg></span></a></p>
</details>
<h2 id="line-line-safe">Line Line (Safe)</h2>
<p>Provided with two lines <code>( a, b )</code> and <code>( c, d )</code> defined by two points each, determine the point of their intersection.</p>
<div class="highlight"><pre><span></span><code><span id="__span-26-1"><span class="sd">&quot;&quot;&quot; Inputs</span>
</span><span id="__span-26-2"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-26-3"><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="ne">Point3d</span><span class="p">(</span> <span class="n">ax</span><span class="p">,</span> <span class="n">ay</span><span class="p">,</span> <span class="n">az</span> <span class="p">),</span> <span class="ne">Point3d</span><span class="p">(</span> <span class="n">bx</span><span class="p">,</span> <span class="n">by</span><span class="p">,</span> <span class="n">bz</span> <span class="p">)</span>
</span><span id="__span-26-4"><span class="n">c</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="ne">Point3d</span><span class="p">(</span> <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span><span class="p">,</span> <span class="n">cz</span> <span class="p">),</span> <span class="ne">Point3d</span><span class="p">(</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">,</span> <span class="n">dz</span> <span class="p">)</span>
</span></code></pre></div>
<details class="solution">
<summary>Solution</summary>
<p>This problem has the same solution as seen above but asks for considering the special cases that can cause either of the methods to fail. Geometrically, there are several scenarios seen below. The objective is to account for them.</p>
<ol>
<li>If either line is degenerate, in the sense that the distance between its two points is zero, then this will generate zero-length vectors, which will eventually raise division by zero exceptions.</li>
<li>If all points are colinear, then it is even more troublesome because it can either mean that there are infinite solutions represented by their overlap, or none if we assume the lines as bounded segments.</li>
<li>If the lines are parallel, then the cross product of their directions will become the zero vector causing some denominator to also become zero, resulting again in a division by zero exceptions.</li>
<li>If all points of both lines are not on the same plane, then there is no intersection point, because they are disjoint.</li>
</ol>
<div class="highlight"><pre><span></span><code><span id="__span-27-1"><span class="sd">&#39;&#39;&#39; Line and Line Intersection</span>
</span><span id="__span-27-2"><span class="sd">&#39;&#39;&#39;</span>
</span><span id="__span-27-3"><span class="k">def</span><span class="w"> </span><span class="nf">LineLineSafe</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span><span class="p">,</span> <span class="n">epsilon</span> <span class="o">=</span> <span class="mf">1e-5</span> <span class="p">):</span>
</span><span id="__span-27-4"><span class="w">    </span><span class="sd">&#39;&#39;&#39; Degenerate Cases</span>
</span><span id="__span-27-5"><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="__span-27-6">    <span class="n">u</span> <span class="o">=</span> <span class="n">b</span> <span class="o">-</span> <span class="n">a</span>
</span><span id="__span-27-7">    <span class="k">if</span><span class="p">(</span> <span class="n">u</span> <span class="o">*</span> <span class="n">u</span> <span class="o">&lt;=</span> <span class="n">epsilon</span> <span class="p">):</span>
</span><span id="__span-27-8">        <span class="k">return</span> <span class="s1">&#39;Degenerate&#39;</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span>
</span><span id="__span-27-9">
</span><span id="__span-27-10">    <span class="n">v</span> <span class="o">=</span> <span class="n">d</span> <span class="o">-</span> <span class="n">c</span>
</span><span id="__span-27-11">    <span class="k">if</span><span class="p">(</span> <span class="n">v</span> <span class="o">*</span> <span class="n">v</span> <span class="o">&lt;=</span> <span class="n">epsilon</span> <span class="p">):</span>
</span><span id="__span-27-12">        <span class="k">return</span> <span class="s1">&#39;Degenerate&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span>
</span><span id="__span-27-13">
</span><span id="__span-27-14"><span class="w">    </span><span class="sd">&#39;&#39;&#39; Parallel &amp; Colinear Cases</span>
</span><span id="__span-27-15"><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="__span-27-16">    <span class="n">w</span> <span class="o">=</span> <span class="n">c</span> <span class="o">-</span> <span class="n">a</span>
</span><span id="__span-27-17">    <span class="n">n</span> <span class="o">=</span> <span class="ne">Vector3d</span><span class="o">.</span><span class="n">CrossProduct</span><span class="p">(</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="p">)</span>
</span><span id="__span-27-18">    <span class="k">if</span><span class="p">(</span> <span class="n">n</span> <span class="o">*</span> <span class="n">n</span> <span class="o">&lt;=</span> <span class="n">epsilon</span> <span class="p">):</span>
</span><span id="__span-27-19"><span class="w">        </span><span class="sd">&#39;&#39;&#39; Compute Distance Between Lines</span>
</span><span id="__span-27-20"><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="__span-27-21">        <span class="n">t</span> <span class="o">=</span> <span class="p">(</span> <span class="n">u</span> <span class="o">*</span> <span class="n">w</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="n">u</span> <span class="o">*</span> <span class="n">u</span> <span class="p">)</span>
</span><span id="__span-27-22">        <span class="n">d</span> <span class="o">=</span> <span class="n">w</span> <span class="o">-</span> <span class="n">u</span> <span class="o">*</span> <span class="n">t</span>
</span><span id="__span-27-23">        <span class="k">if</span><span class="p">(</span> <span class="n">d</span> <span class="o">*</span> <span class="n">d</span> <span class="o">&lt;=</span> <span class="n">epsilon</span> <span class="p">):</span>
</span><span id="__span-27-24">            <span class="k">return</span> <span class="s1">&#39;Colinear&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span>
</span><span id="__span-27-25">        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-27-26">            <span class="k">return</span> <span class="s1">&#39;Parallel&#39;</span><span class="p">,</span>   <span class="n">d</span><span class="p">,</span> <span class="mf">0.0</span>
</span><span id="__span-27-27">
</span><span id="__span-27-28"><span class="w">    </span><span class="sd">&#39;&#39;&#39; Intersection &amp; Disjoint Cases</span>
</span><span id="__span-27-29"><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="__span-27-30">    <span class="n">s</span><span class="p">,</span> <span class="n">t</span> <span class="o">=</span> <span class="n">LineLineFast</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span> <span class="p">)</span>
</span><span id="__span-27-31">    <span class="k">if</span><span class="p">(</span> <span class="nb">abs</span><span class="p">(</span> <span class="n">w</span> <span class="o">*</span> <span class="n">n</span> <span class="p">)</span> <span class="o">&lt;=</span> <span class="n">epsilon</span> <span class="p">):</span>
</span><span id="__span-27-32">        <span class="k">return</span> <span class="s1">&#39;Success&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">t</span>
</span><span id="__span-27-33">    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-27-34">        <span class="k">return</span> <span class="s1">&#39;Disjoint&#39;</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">t</span>
</span><span id="__span-27-35">
</span><span id="__span-27-36"><span class="n">r</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">t</span> <span class="o">=</span> <span class="n">LineLineSafe</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">d</span> <span class="p">)</span>
</span><span id="__span-27-37"><span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;Result: &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="n">r</span> <span class="p">)</span> <span class="p">)</span>
</span><span id="__span-27-38"><span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;s: </span><span class="si">{:&gt;8.5f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="n">s</span> <span class="p">)</span> <span class="p">)</span>
</span><span id="__span-27-39"><span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;t: </span><span class="si">{:&gt;8.5f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span> <span class="p">)</span>
</span></code></pre></div>
<p><a class="md-button" href="../lineline.gh">Grasshopper <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 20h14v-2H5m14-9h-4V3H9v6H5l7 7z"/></svg></span></a></p>
</details>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright (c) 2024-2025 Digital Design and Fabrication
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.525ec568.min.js"></script>
      
    
  </body>
</html>