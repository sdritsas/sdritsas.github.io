
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Stylianos Dritsas">
      
      
      
        <link rel="prev" href="../euclidean/">
      
      
        <link rel="next" href="../../surfaces/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.40">
    
    
      
        <title>Computational - Digital Design and Fabrication</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8c3ca2c6.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 22c5.5 0 10-4.5 10-10S17.5 2 12 2 2 6.5 2 12s4.5 10 10 10M11 7h2v2h-2zm3 10h-4v-2h1v-2h-1v-2h3v4h1z"/></svg>');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/style.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#computational-curves" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Digital Design and Fabrication" class="md-header__button md-logo" aria-label="Digital Design and Fabrication" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 2 4 4h-3v7.85l6.53 3.76L21 15.03l1.5 5.47-5.5 1.46 1.53-2.61L12 15.58l-6.53 3.77L7 21.96 1.5 20.5 3 15.03l1.47 2.58L11 13.85V6H8z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Digital Design and Fabrication
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Computational
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Digital Design and Fabrication" class="md-nav__button md-logo" aria-label="Digital Design and Fabrication" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12 2 4 4h-3v7.85l6.53 3.76L21 15.03l1.5 5.47-5.5 1.46 1.53-2.61L12 15.58l-6.53 3.77L7 21.96 1.5 20.5 3 15.03l1.47 2.58L11 13.85V6H8z"/></svg>

    </a>
    Digital Design and Fabrication
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Parametrics
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Parametrics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../parametrics/components/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Components
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../parametrics/template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Template
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../parametrics/cpython/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CPython
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Programming
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Programming
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../programming/collections/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Collections
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../programming/functions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Functions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../programming/objects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Objects
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Geometry
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Geometry
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Vectors
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Vectors
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vectors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vectors/distances/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Distance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vectors/addition/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Addition
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vectors/subtraction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Subtraction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vectors/multiplication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiplication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vectors/normalize/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Normalization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vectors/dot-product/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dot Product
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vectors/cross-product/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cross Product
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vectors/systems/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coordinate Systems
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../vectors/transforms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transformations
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" checked>
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Curves
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Curves
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../euclidean/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Euclidean
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Computational
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Computational
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#polylines" class="md-nav__link">
    <span class="md-ellipsis">
      Polylines
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Polylines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition" class="md-nav__link">
    <span class="md-ellipsis">
      Definition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smoothing" class="md-nav__link">
    <span class="md-ellipsis">
      Smoothing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#application" class="md-nav__link">
    <span class="md-ellipsis">
      Application
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subdivisions" class="md-nav__link">
    <span class="md-ellipsis">
      Subdivisions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Subdivisions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_1" class="md-nav__link">
    <span class="md-ellipsis">
      Definition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#approximation" class="md-nav__link">
    <span class="md-ellipsis">
      Approximation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bezier-curves" class="md-nav__link">
    <span class="md-ellipsis">
      Bézier Curves
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bézier Curves">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_2" class="md-nav__link">
    <span class="md-ellipsis">
      Definition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#derivatives" class="md-nav__link">
    <span class="md-ellipsis">
      Derivatives
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#application_1" class="md-nav__link">
    <span class="md-ellipsis">
      Application
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bspline-curves" class="md-nav__link">
    <span class="md-ellipsis">
      BSpline Curves
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BSpline Curves">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_3" class="md-nav__link">
    <span class="md-ellipsis">
      Definition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation_1" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#periodic-curves" class="md-nav__link">
    <span class="md-ellipsis">
      Periodic Curves
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#derivatives_1" class="md-nav__link">
    <span class="md-ellipsis">
      Derivatives
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#application_2" class="md-nav__link">
    <span class="md-ellipsis">
      Application
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nurbs-curves" class="md-nav__link">
    <span class="md-ellipsis">
      Nurbs Curves
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nurbs Curves">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_4" class="md-nav__link">
    <span class="md-ellipsis">
      Definition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation_2" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#derivatives_2" class="md-nav__link">
    <span class="md-ellipsis">
      Derivatives
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#application_3" class="md-nav__link">
    <span class="md-ellipsis">
      Application
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    <span class="md-ellipsis">
      Resources
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Surfaces
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Surfaces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../surfaces/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../surfaces/euclidean/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Euclidean
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../surfaces/computational/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Computational
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Meshes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Meshes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../meshes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Geometry
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../meshes/topology/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Topology
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Solids
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Solids
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../solids/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../solids/constructive/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Constructive
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../solids/boundary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Boundary
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../solids/voxels/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Volumetric
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../solids/clouds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Point Clouds
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Constructions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Constructions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../constructions/angles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Angles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../constructions/areas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Areas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../constructions/centroids/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Centroids
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../constructions/clashes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Clashes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../constructions/containment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Containment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../constructions/mappings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mappings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../constructions/offsets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Offsets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../constructions/perpendiculars/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Perpendiculars
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../constructions/polygons/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Polygons
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../constructions/projections/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Projections
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../constructions/reflections/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reflections
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#polylines" class="md-nav__link">
    <span class="md-ellipsis">
      Polylines
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Polylines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition" class="md-nav__link">
    <span class="md-ellipsis">
      Definition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#smoothing" class="md-nav__link">
    <span class="md-ellipsis">
      Smoothing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#application" class="md-nav__link">
    <span class="md-ellipsis">
      Application
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subdivisions" class="md-nav__link">
    <span class="md-ellipsis">
      Subdivisions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Subdivisions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_1" class="md-nav__link">
    <span class="md-ellipsis">
      Definition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#approximation" class="md-nav__link">
    <span class="md-ellipsis">
      Approximation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bezier-curves" class="md-nav__link">
    <span class="md-ellipsis">
      Bézier Curves
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bézier Curves">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_2" class="md-nav__link">
    <span class="md-ellipsis">
      Definition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#derivatives" class="md-nav__link">
    <span class="md-ellipsis">
      Derivatives
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#application_1" class="md-nav__link">
    <span class="md-ellipsis">
      Application
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bspline-curves" class="md-nav__link">
    <span class="md-ellipsis">
      BSpline Curves
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BSpline Curves">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_3" class="md-nav__link">
    <span class="md-ellipsis">
      Definition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation_1" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#periodic-curves" class="md-nav__link">
    <span class="md-ellipsis">
      Periodic Curves
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#derivatives_1" class="md-nav__link">
    <span class="md-ellipsis">
      Derivatives
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#application_2" class="md-nav__link">
    <span class="md-ellipsis">
      Application
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nurbs-curves" class="md-nav__link">
    <span class="md-ellipsis">
      Nurbs Curves
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Nurbs Curves">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definition_4" class="md-nav__link">
    <span class="md-ellipsis">
      Definition
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation_2" class="md-nav__link">
    <span class="md-ellipsis">
      Evaluation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#derivatives_2" class="md-nav__link">
    <span class="md-ellipsis">
      Derivatives
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#application_3" class="md-nav__link">
    <span class="md-ellipsis">
      Application
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    <span class="md-ellipsis">
      Resources
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="computational-curves">Computational Curves</h1>
<p>The types of curves presented in this section are enabled by the ability to perform computations efficiently. Otherwise such geometries are impractical and inaccessible with conventional media. The presentation follows the historical evolution of polygonal and smooth curves including Bezier, BSpline and Nurbs curves.</p>
<h2 id="polylines">Polylines</h2>
<h3 id="definition">Definition</h3>
<p>Polylines are piece-wise continuous line segment curves represented by lists of points. Polylines where the first and last points coincide are considered closed or otherwise open. The length of a polyline is the sum of its linear segments.</p>
<div class="highlight"><pre><span></span><code><span id="__span-0-1"><span class="sd">&quot;&quot;&quot; Polyline Class</span>
</span><span id="__span-0-2"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-0-3"><span class="k">class</span> <span class="nc">Poly</span><span class="p">:</span>
</span><span id="__span-0-4"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Construction</span>
</span><span id="__span-0-5"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-6">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">points</span> <span class="p">):</span>
</span><span id="__span-0-7">        <span class="bp">self</span><span class="o">.</span><span class="n">Points</span> <span class="o">=</span> <span class="n">points</span>
</span><span id="__span-0-8">
</span><span id="__span-0-9"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Source/Start Point</span>
</span><span id="__span-0-10"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-11">    <span class="nd">@property</span>
</span><span id="__span-0-12">    <span class="k">def</span> <span class="nf">Source</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
</span><span id="__span-0-13">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-0-14">
</span><span id="__span-0-15"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Target/End Point</span>
</span><span id="__span-0-16"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-17">    <span class="nd">@property</span>
</span><span id="__span-0-18">    <span class="k">def</span> <span class="nf">Target</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
</span><span id="__span-0-19">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Points</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="__span-0-20">
</span><span id="__span-0-21"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Is Polyline Closed?</span>
</span><span id="__span-0-22"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-23">    <span class="nd">@property</span>
</span><span id="__span-0-24">    <span class="k">def</span> <span class="nf">IsClosed</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
</span><span id="__span-0-25">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">Source</span><span class="o">.</span><span class="n">DistanceTo</span><span class="p">(</span>
</span><span id="__span-0-26">               <span class="bp">self</span><span class="o">.</span><span class="n">Target</span> <span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">1e-5</span>
</span><span id="__span-0-27">
</span><span id="__span-0-28"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Line Segments Enumerator</span>
</span><span id="__span-0-29"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-30">    <span class="nd">@property</span>
</span><span id="__span-0-31">    <span class="k">def</span> <span class="nf">Segments</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
</span><span id="__span-0-32">        <span class="k">for</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
</span><span id="__span-0-33">                <span class="bp">self</span><span class="o">.</span><span class="n">Points</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">Points</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="p">)</span>
</span><span id="__span-0-34">            <span class="k">yield</span> <span class="p">(</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span> <span class="p">)</span>
</span><span id="__span-0-35">
</span><span id="__span-0-36"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Length of Polyline</span>
</span><span id="__span-0-37"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-0-38">    <span class="nd">@property</span>
</span><span id="__span-0-39">    <span class="k">def</span> <span class="nf">Length</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
</span><span id="__span-0-40">        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span> <span class="p">[</span><span class="n">source</span><span class="o">.</span><span class="n">DistanceTo</span><span class="p">(</span> <span class="n">target</span> <span class="p">)</span>
</span><span id="__span-0-41">            <span class="k">for</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Segments</span><span class="p">]</span> <span class="p">)</span>
</span></code></pre></div>
<h3 id="smoothing">Smoothing</h3>
<p>Polylines are often used for representing time-series, where a value or position is tracked over time. Signals collected from sensors often contain numerous points as well as errors. A simple process for decimating the points and simultaneously deriving a smooth trend curve involves averaging consecutive points.</p>
<p>In each iteration, every line segment is collapsed to its mid-point, and thus the polyline is reduced by one point. Averaging is repeated recursively producing a smooth approximations of the initial curve. The start and end points of the polyline may be retained, or pinned, because otherwise the curve will geometrically shrink, theoretically down to a single point.</p>
<div class="highlight"><pre><span></span><code><span id="__span-1-1"><span class="k">class</span> <span class="nc">Poly</span><span class="p">:</span>
</span><span id="__span-1-2"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Average Consecutive Points</span>
</span><span id="__span-1-3"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-1-4">    <span class="k">def</span> <span class="nf">Average</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">pinned</span> <span class="p">):</span>
</span><span id="__span-1-5">        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-1-6">        <span class="k">if</span><span class="p">(</span> <span class="n">pinned</span> <span class="p">):</span>
</span><span id="__span-1-7">            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">Source</span> <span class="p">)</span>
</span><span id="__span-1-8">
</span><span id="__span-1-9">        <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">Segments</span><span class="p">:</span>
</span><span id="__span-1-10">            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="p">(</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">)</span>
</span><span id="__span-1-11">
</span><span id="__span-1-12">        <span class="k">if</span><span class="p">(</span> <span class="n">pinned</span> <span class="p">):</span>
</span><span id="__span-1-13">            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">Target</span> <span class="p">)</span>
</span><span id="__span-1-14">        <span class="k">return</span> <span class="n">result</span>
</span><span id="__span-1-15">
</span><span id="__span-1-16"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Polyline Smoothing</span>
</span><span id="__span-1-17"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-1-18">    <span class="k">def</span> <span class="nf">Smooth</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">iterations</span> <span class="o">=</span> <span class="mi">32</span><span class="p">,</span> <span class="n">pinned</span> <span class="o">=</span> <span class="kc">True</span> <span class="p">):</span>
</span><span id="__span-1-19">        <span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Points</span>
</span><span id="__span-1-20">        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="n">iterations</span> <span class="p">):</span>
</span><span id="__span-1-21">            <span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Average</span><span class="p">(</span> <span class="n">points</span><span class="p">,</span> <span class="n">pinned</span> <span class="p">)</span>
</span><span id="__span-1-22">        <span class="k">return</span> <span class="ne">Poly</span><span class="p">(</span> <span class="n">points</span> <span class="p">)</span>
</span><span id="__span-1-23">
</span><span id="__span-1-24">    <span class="k">def</span> <span class="nf">ToPolyline</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
</span><span id="__span-1-25">        <span class="k">return</span> <span class="ne">Polyline</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">Points</span> <span class="p">)</span>
</span><span id="__span-1-26">
</span><span id="__span-1-27"><span class="sd">&quot;&quot;&quot; Smoothing Noisy Signal</span>
</span><span id="__span-1-28"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-1-29"><span class="kn">import</span> <span class="nn">math</span><span class="o">,</span> <span class="nn">random</span>
</span><span id="__span-1-30">
</span><span id="__span-1-31"><span class="n">points</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-1-32"><span class="n">count</span> <span class="o">=</span> <span class="mi">50</span>
</span><span id="__span-1-33"><span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="n">count</span> <span class="p">):</span>
</span><span id="__span-1-34">    <span class="n">x</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="ne">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">index</span> <span class="o">/</span> <span class="p">(</span> <span class="n">count</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span>
</span><span id="__span-1-35">    <span class="n">y</span> <span class="o">=</span> <span class="ne">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span> <span class="n">x</span> <span class="p">)</span> <span class="o">+</span> <span class="ne">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span> <span class="p">)</span>
</span><span id="__span-1-36">    <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="ne">Point3d</span><span class="p">(</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">)</span>
</span><span id="__span-1-37">
</span><span id="__span-1-38"><span class="n">noisy</span> <span class="o">=</span> <span class="ne">Poly</span><span class="p">(</span> <span class="n">points</span> <span class="p">)</span>
</span><span id="__span-1-39"><span class="n">smooth</span> <span class="o">=</span> <span class="n">noisy</span><span class="o">.</span><span class="n">Smooth</span><span class="p">(</span> <span class="p">)</span>
</span></code></pre></div>
<h3 id="application">Application</h3>
<p>Rhino uses two classes for polylines, namely <code>Polyline</code> and <code>PolylineCurve</code>, with the former being a light-weight list-like representation, while the later implementing the <code>Curve</code> interface supporting many more complex methods. The <code>Polyline</code> class is used for manipulating point lists directly, while the <code>PolylineCurve</code> is used for passing curve-like parameters to geometric methods such as computing curve intersections, lofting surfaces etc.</p>
<div class="highlight"><pre><span></span><code><span id="__span-2-1"><span class="sd">&quot;&quot;&quot; Polyline Object</span>
</span><span id="__span-2-2"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-2-3"><span class="n">poly</span> <span class="o">=</span> <span class="ne">Polyline</span><span class="p">(</span> <span class="p">[</span><span class="ne">Point3d</span><span class="p">(</span> <span class="n">x</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">)</span>
</span><span id="__span-2-4">    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="mi">10</span> <span class="p">)]</span> <span class="p">)</span>
</span><span id="__span-2-5">
</span><span id="__span-2-6"><span class="sd">&quot;&quot;&quot; Point Indexing</span>
</span><span id="__span-2-7"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-2-8"><span class="n">source</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">First</span>
</span><span id="__span-2-9"><span class="n">target</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">Last</span>
</span><span id="__span-2-10">
</span><span id="__span-2-11"><span class="n">source</span> <span class="o">=</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-2-12"><span class="n">target</span> <span class="o">=</span> <span class="n">poly</span><span class="p">[</span><span class="n">poly</span><span class="o">.</span><span class="n">Count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="c1">#-- Cannot use -1</span>
</span><span id="__span-2-13">
</span><span id="__span-2-14"><span class="sd">&quot;&quot;&quot; Polyline Length</span>
</span><span id="__span-2-15"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-2-16"><span class="n">length</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">Length</span>
</span><span id="__span-2-17">
</span><span id="__span-2-18"><span class="sd">&quot;&quot;&quot; Polyline Curve Object</span>
</span><span id="__span-2-19"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-2-20"><span class="n">poly</span> <span class="o">=</span> <span class="ne">PolylineCurve</span><span class="p">(</span> <span class="p">[</span><span class="ne">Point3d</span><span class="p">(</span> <span class="n">x</span><span class="p">,</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">)</span>
</span><span id="__span-2-21">    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="mi">10</span> <span class="p">)]</span> <span class="p">)</span>
</span><span id="__span-2-22">
</span><span id="__span-2-23"><span class="sd">&quot;&quot;&quot; Point Indexing</span>
</span><span id="__span-2-24"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-2-25"><span class="n">source</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">PointAtStart</span>
</span><span id="__span-2-26"><span class="n">target</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">PointAtEnd</span>
</span><span id="__span-2-27">
</span><span id="__span-2-28"><span class="n">source</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span> <span class="mi">0</span> <span class="p">)</span>
</span><span id="__span-2-29"><span class="n">target</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span> <span class="n">poly</span><span class="o">.</span><span class="n">PointCount</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span>
</span><span id="__span-2-30">
</span><span id="__span-2-31"><span class="sd">&quot;&quot;&quot; Polyline Length</span>
</span><span id="__span-2-32"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-2-33"><span class="n">length</span> <span class="o">=</span> <span class="n">poly</span><span class="o">.</span><span class="n">GetLength</span><span class="p">(</span> <span class="p">)</span>
</span></code></pre></div>
<h2 id="subdivisions">Subdivisions</h2>
<h3 id="definition_1">Definition</h3>
<p>Subdivision curves are defined by an initial control polygon which is recursively augmented by introducing new interim points and then adjusting their positions in a weighted average sense. The process typically converges to a limiting smooth curve after only a few iterations. There are two types of subdivision curves, namely approximating and interpolating, with the later retaining the positions of the initial control polygon, unlike the former one, see <a href="https://en.wikipedia.org/wiki/Subdivision_surface">additional</a> information.</p>
<h3 id="approximation">Approximation</h3>
<p>Approximation schemes iterate over pairs of consecutive line segments, <code>a-&gt;b</code> and <code>b-&gt;c</code>, and inject two new mid-points laterally <code>A = ( a + b ) / 2</code> and <code>C = ( b + c ) / 2</code>. The common point <code>b</code> between the segments is relocated at a position computed from the weighted average of its initial position and the mid-points <code>B = A * wa + b * wb + C * wc</code>, where <code>wa</code>, <code>wb</code> and <code>wb</code> are the weights. The list <code>K = [wa, wb, wc]</code> is known as the subdivision's kernel. Moreover, the sum of weights is unity <code>wa + wb + wc = 1</code>.</p>
<p>The number of points <code>n</code> after each iteration is almost double <code>2 * n - 1</code>, therefore the curve rapidly reaches its smooth limiting shape. Open and closed control polygons require attention such that the new points wrap around properly.</p>
<div class="highlight"><pre><span></span><code><span id="__span-3-1"><span class="sd">&quot;&quot;&quot; Subdivision Curve</span>
</span><span id="__span-3-2"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-3-3"><span class="k">class</span> <span class="nc">SubDivisionCurve</span><span class="p">(</span> <span class="ne">Poly</span> <span class="p">):</span>
</span><span id="__span-3-4">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">weight</span> <span class="o">=</span> <span class="mi">2</span> <span class="p">):</span>
</span><span id="__span-3-5">        <span class="ne">Poly</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">points</span> <span class="p">)</span>
</span><span id="__span-3-6">        <span class="n">scale</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span> <span class="n">weight</span> <span class="o">+</span> <span class="mi">2</span> <span class="p">)</span>
</span><span id="__span-3-7">        <span class="bp">self</span><span class="o">.</span><span class="n">Kernel</span> <span class="o">=</span> <span class="p">[</span><span class="n">scale</span><span class="p">,</span>
</span><span id="__span-3-8">                       <span class="n">scale</span> <span class="o">*</span> <span class="n">weight</span><span class="p">,</span>
</span><span id="__span-3-9">                       <span class="n">scale</span><span class="p">]</span>
</span><span id="__span-3-10">
</span><span id="__span-3-11"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Evaluate Kernel</span>
</span><span id="__span-3-12"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-3-13">    <span class="k">def</span> <span class="nf">Evaluate</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="p">):</span>
</span><span id="__span-3-14">        <span class="n">A</span> <span class="o">=</span> <span class="p">(</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
</span><span id="__span-3-15">        <span class="n">C</span> <span class="o">=</span> <span class="p">(</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span> <span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
</span><span id="__span-3-16">
</span><span id="__span-3-17">        <span class="n">wa</span><span class="p">,</span> <span class="n">wb</span><span class="p">,</span> <span class="n">wc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Kernel</span>
</span><span id="__span-3-18">        <span class="n">B</span> <span class="o">=</span> <span class="p">(</span> <span class="n">A</span> <span class="o">*</span> <span class="n">wa</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">wb</span> <span class="o">+</span> <span class="n">C</span> <span class="o">*</span> <span class="n">wc</span> <span class="p">)</span>
</span><span id="__span-3-19">
</span><span id="__span-3-20">        <span class="k">return</span> <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span>
</span><span id="__span-3-21">
</span><span id="__span-3-22"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Subdivision Iteration</span>
</span><span id="__span-3-23"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-3-24">    <span class="k">def</span> <span class="nf">Subdivide</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">closed</span> <span class="p">):</span>
</span><span id="__span-3-25">        <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-3-26">        <span class="k">if</span><span class="p">(</span> <span class="n">closed</span> <span class="p">):</span>
</span><span id="__span-3-27">            <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Evaluate</span><span class="p">(</span>
</span><span id="__span-3-28">                <span class="n">points</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="c1">#-- skip -1</span>
</span><span id="__span-3-29">                <span class="n">points</span><span class="p">[</span> <span class="mi">0</span><span class="p">],</span>
</span><span id="__span-3-30">                <span class="n">points</span><span class="p">[</span> <span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
</span><span id="__span-3-31">            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">A</span> <span class="p">)</span>
</span><span id="__span-3-32">            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">B</span> <span class="p">)</span>
</span><span id="__span-3-33">        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-3-34">            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
</span><span id="__span-3-35">
</span><span id="__span-3-36">        <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
</span><span id="__span-3-37">                <span class="n">points</span><span class="p">[</span> <span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span>
</span><span id="__span-3-38">                <span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
</span><span id="__span-3-39">                <span class="n">points</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span>  <span class="p">]</span> <span class="p">):</span>
</span><span id="__span-3-40">            <span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Evaluate</span><span class="p">(</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="p">)</span>
</span><span id="__span-3-41">            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">A</span> <span class="p">)</span>
</span><span id="__span-3-42">            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">B</span> <span class="p">)</span>
</span><span id="__span-3-43">        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">C</span> <span class="p">)</span>
</span><span id="__span-3-44">
</span><span id="__span-3-45">        <span class="k">if</span><span class="p">(</span> <span class="ow">not</span> <span class="n">closed</span> <span class="p">):</span>
</span><span id="__span-3-46">            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">points</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
</span><span id="__span-3-47">        <span class="k">return</span> <span class="n">result</span>
</span><span id="__span-3-48">
</span><span id="__span-3-49"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Curve Approximation</span>
</span><span id="__span-3-50"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-3-51">    <span class="k">def</span> <span class="nf">Approximate</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">iterations</span> <span class="o">=</span> <span class="mi">8</span> <span class="p">):</span>
</span><span id="__span-3-52">        <span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Points</span>
</span><span id="__span-3-53">        <span class="n">closed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">IsClosed</span>
</span><span id="__span-3-54">        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="n">iterations</span> <span class="p">):</span>
</span><span id="__span-3-55">            <span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Subdivide</span><span class="p">(</span> <span class="n">points</span><span class="p">,</span> <span class="n">closed</span> <span class="p">)</span>
</span><span id="__span-3-56">        <span class="k">return</span> <span class="ne">Poly</span><span class="p">(</span> <span class="n">points</span> <span class="p">)</span>
</span><span id="__span-3-57">
</span><span id="__span-3-58"><span class="sd">&quot;&quot;&quot; Open Curve</span>
</span><span id="__span-3-59"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-3-60"><span class="n">curve</span> <span class="o">=</span> <span class="ne">SubDivisionCurve</span><span class="p">(</span> <span class="p">[</span>
</span><span id="__span-3-61">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">),</span>
</span><span id="__span-3-62">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span> <span class="p">),</span>
</span><span id="__span-3-63">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">),</span>
</span><span id="__span-3-64">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mi">3</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span> <span class="p">),</span>
</span><span id="__span-3-65">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)]</span> <span class="p">)</span><span class="o">.</span><span class="n">Approximate</span><span class="p">(</span> <span class="p">)</span>
</span><span id="__span-3-66">
</span><span id="__span-3-67"><span class="sd">&quot;&quot;&quot; Closed Curve</span>
</span><span id="__span-3-68"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-3-69"><span class="n">curve</span> <span class="o">=</span> <span class="ne">SubDivisionCurve</span><span class="p">(</span> <span class="p">[</span>
</span><span id="__span-3-70">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span> <span class="p">),</span>
</span><span id="__span-3-71">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span> <span class="p">),</span>
</span><span id="__span-3-72">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span> <span class="p">),</span>
</span><span id="__span-3-73">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span> <span class="p">),</span>
</span><span id="__span-3-74">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)]</span> <span class="p">)</span><span class="o">.</span><span class="n">Approximate</span><span class="p">(</span> <span class="p">)</span>
</span></code></pre></div>
<h2 id="bezier-curves">Bézier Curves</h2>
<p>Bézier curves <code>B( t )</code> are parametric curves using <code>t: [0, 1]</code> with a polynomial representation defined by a sequence of control points <em>P<sub>i</sub> = [P<sub>0</sub>, P<sub>1</sub>, ..., P<sub>n-1</sub>]</em>. The number of control points <code>n</code> is associated with the degree <code>d</code> of the polynomial by <code>n = d + 1</code>. Geometrically they generalize the idea of smoothly blending between points. For example below are the first few polynomials.</p>
<ol>
<li>B( t ) = ( 1 - t )P<sub>0</sub> + tP<sub>1</sub></li>
<li>B( t ) = ( 1 - t )<sup>2</sup>P<sub>0</sub> + 2( 1 - t )tP<sub>1</sub> + t<sup>2</sup>P<sub>2</sub></li>
<li>B( t ) = ( 1 - t )<sup>3</sup>P<sub>0</sub> + 3( 1 - t )<sup>2</sup>tP<sub>1</sub> + 3( 1 - t )t<sup>2</sup>P<sub>2</sub> + t<sup>3</sup>P<sub>3</sub></li>
<li>B( t ) = ( 1 - t )<sup>4</sup>P<sub>0</sub> + 4( 1 - t )<sup>3</sup>tP<sub>1</sub> + 6( 1 - t )<sup>2</sup>t<sup>2</sup>P<sub>2</sub> + 4( 1 - t )t<sup>3</sup>P<sub>3</sub> + t<sup>4</sup>P<sub>4</sub></li>
</ol>
<p>The first degree polynomial is just the linear interpolation used in the definition a line segment. Higher degrees are extension of this principle. Bézier curves, especially quadratics and cubics, are pervasive across design software because they are smooth, require limited memory and they are fast to compute.</p>
<h3 id="definition_2">Definition</h3>
<p>The expression often used as definition for <a href="https://en.wikipedia.org/wiki/B%C3%A9zier_curve">Bézier curves</a>, namely <em>B( t ) = Σ[0, d] b<sub>d,i</sub>( t ) P<sub>i</sub></em>, where <em>b<sub>d,i</sub>( t ) = comb( d, i ) t<sup>i</sup> ( 1 - t )<sup>d-i</sup></em>, is also known as the <a href="https://en.wikipedia.org/wiki/Bernstein_polynomial">Bernstein basis function</a>. <em>Comb( n, k )</em> is a function that returns the <a href="https://en.wikipedia.org/wiki/Binomial_coefficient">binomial coefficient</a>  <em>n! / ( k! ( n - k )! )</em>.</p>
<div class="highlight"><pre><span></span><code><span id="__span-4-1"><span class="sd">&quot;&quot;&quot; Binomial Coefficient for python &lt; 3.8</span>
</span><span id="__span-4-2"><span class="sd">    or just math.comb( ) for python &gt; 3.8</span>
</span><span id="__span-4-3"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-4-4"><span class="k">def</span> <span class="nf">math_comb</span><span class="p">(</span> <span class="n">n</span><span class="p">,</span> <span class="n">k</span> <span class="p">):</span>
</span><span id="__span-4-5">    <span class="k">return</span> <span class="ne">math</span><span class="o">.</span><span class="n">factorial</span><span class="p">(</span> <span class="n">n</span> <span class="p">)</span> <span class="o">//</span> <span class="p">(</span>
</span><span id="__span-4-6">           <span class="ne">math</span><span class="o">.</span><span class="n">factorial</span><span class="p">(</span> <span class="n">k</span> <span class="p">)</span> <span class="o">*</span> <span class="ne">math</span><span class="o">.</span><span class="n">factorial</span><span class="p">(</span> <span class="n">n</span> <span class="o">-</span> <span class="n">k</span> <span class="p">)</span> <span class="p">)</span>
</span><span id="__span-4-7">
</span><span id="__span-4-8"><span class="sd">&quot;&quot;&quot; Evaluate Bezier at Parameter</span>
</span><span id="__span-4-9"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-4-10"><span class="k">class</span> <span class="nc">BezierCurve</span><span class="p">:</span>
</span><span id="__span-4-11">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">points</span> <span class="p">):</span>
</span><span id="__span-4-12">        <span class="bp">self</span><span class="o">.</span><span class="n">Points</span> <span class="o">=</span> <span class="n">points</span>
</span><span id="__span-4-13">
</span><span id="__span-4-14">    <span class="nd">@property</span>
</span><span id="__span-4-15">    <span class="k">def</span> <span class="nf">Degree</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
</span><span id="__span-4-16">        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">Points</span> <span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="__span-4-17">
</span><span id="__span-4-18">    <span class="k">def</span> <span class="nf">Evaluate</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">t</span> <span class="p">):</span>
</span><span id="__span-4-19">        <span class="n">point</span> <span class="o">=</span> <span class="ne">Point3d</span><span class="o">.</span><span class="n">Origin</span>
</span><span id="__span-4-20">        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">control</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">Points</span> <span class="p">):</span>
</span><span id="__span-4-21">            <span class="n">alpha</span> <span class="o">=</span> <span class="n">t</span> <span class="o">**</span> <span class="n">index</span>
</span><span id="__span-4-22">            <span class="n">omega</span> <span class="o">=</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">t</span> <span class="p">)</span> <span class="o">**</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">Degree</span> <span class="o">-</span> <span class="n">index</span> <span class="p">)</span>
</span><span id="__span-4-23">            <span class="n">combo</span> <span class="o">=</span> <span class="n">math_comb</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">Degree</span><span class="p">,</span> <span class="n">index</span> <span class="p">)</span>
</span><span id="__span-4-24">            <span class="n">basis</span> <span class="o">=</span> <span class="n">combo</span> <span class="o">*</span> <span class="n">alpha</span> <span class="o">*</span> <span class="n">omega</span>
</span><span id="__span-4-25">            <span class="n">point</span> <span class="o">+=</span> <span class="n">control</span> <span class="o">*</span> <span class="n">basis</span>
</span><span id="__span-4-26">        <span class="k">return</span> <span class="n">point</span>
</span></code></pre></div>
<p>The expression is derived is by expanding <code>( ( 1 - t ) + t ) ** d</code>, hence the binomial coefficients and combinations of <code>( 1 - t )</code> and <code>t</code> raised in respective powers. When those terms are combined with the control points, they produce continuous curves. This also explains why the degree + 1 equals the number of control points required.</p>
<h3 id="evaluation">Evaluation</h3>
<p>An alternative approach for evaluating Bézier curves deploys recursive linear interpolation: For every pair of consecutive control points <code>P[i]</code> and <code>P[i+1]</code> we compute a new point <code>Q</code> as the linear combination <code>P[i] * ( 1 - t ) + P[i+1] * t</code>. Processing all <code>n</code> points results into a new list of <code>n-1</code> points. Thereafter, the process is repeated until we are left with a single point.</p>
<div class="highlight"><pre><span></span><code><span id="__span-5-1"><span class="k">class</span> <span class="nc">BezierCurve</span><span class="p">:</span>
</span><span id="__span-5-2">    <span class="nd">@staticmethod</span>
</span><span id="__span-5-3">    <span class="k">def</span> <span class="nf">DeCasteljau</span><span class="p">(</span> <span class="n">points</span><span class="p">,</span> <span class="n">t</span> <span class="p">):</span>
</span><span id="__span-5-4">        <span class="k">if</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">points</span> <span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">):</span>
</span><span id="__span-5-5">            <span class="k">return</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-5-6">        <span class="n">new_points</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-5-7">        <span class="k">for</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span> <span class="n">points</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="p">):</span>
</span><span id="__span-5-8">            <span class="n">new_points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">source</span> <span class="o">*</span> <span class="p">(</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">t</span> <span class="p">)</span> <span class="o">+</span> <span class="n">target</span> <span class="o">*</span> <span class="n">t</span> <span class="p">)</span>
</span><span id="__span-5-9">        <span class="k">return</span> <span class="ne">BezierCurve</span><span class="o">.</span><span class="n">DeCasteljau</span><span class="p">(</span> <span class="n">new_points</span><span class="p">,</span> <span class="n">t</span> <span class="p">)</span>
</span><span id="__span-5-10">
</span><span id="__span-5-11">    <span class="k">def</span> <span class="nf">Evaluate</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">t</span> <span class="p">):</span>
</span><span id="__span-5-12">        <span class="k">return</span> <span class="ne">BezierCurve</span><span class="o">.</span><span class="n">DeCasteljau</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">Points</span><span class="p">,</span> <span class="n">t</span> <span class="p">)</span>
</span></code></pre></div>
<h3 id="derivatives">Derivatives</h3>
<p>The derivatives of Bezier curves follow exactly the same rules used for deriving polynomials, namely for f( x ) = x<sup>d</sup> its derivative is f'( x ) = d * x<sup>d-1</sup>. Therefore, to compute the derivative of a Bezier curve, the differences of consecutive control points are scaled by the number of points, effectively dropping a degree, see <a href="https://pages.mtu.edu/~shene/COURSES/cs3621/NOTES/spline/Bezier/bezier-der.html">derivation details</a>.</p>
<div class="highlight"><pre><span></span><code><span id="__span-6-1"><span class="k">class</span> <span class="nc">BezierCurve</span><span class="p">:</span>
</span><span id="__span-6-2"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Derivative / Hodograph Curve</span>
</span><span id="__span-6-3"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-6-4">    <span class="k">def</span> <span class="nf">Derive</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
</span><span id="__span-6-5">        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Degree</span>
</span><span id="__span-6-6">        <span class="n">points</span> <span class="o">=</span> <span class="p">[(</span> <span class="n">target</span> <span class="o">-</span> <span class="n">source</span> <span class="p">)</span> <span class="o">*</span> <span class="n">d</span>
</span><span id="__span-6-7">            <span class="k">for</span> <span class="n">source</span><span class="p">,</span> <span class="n">target</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
</span><span id="__span-6-8">                <span class="bp">self</span><span class="o">.</span><span class="n">Points</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">Points</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="p">)]</span>
</span><span id="__span-6-9">        <span class="k">return</span> <span class="ne">BezierCurve</span><span class="p">(</span> <span class="n">points</span> <span class="p">)</span>
</span><span id="__span-6-10">
</span><span id="__span-6-11"><span class="sd">&quot;&quot;&quot; Bezier Derivative</span>
</span><span id="__span-6-12"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-6-13"><span class="n">controls</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-6-14">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-6-15">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-6-16">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-6-17">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">3.0</span><span class="p">,</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-6-18">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">)]</span>
</span><span id="__span-6-19">
</span><span id="__span-6-20"><span class="n">bezier</span> <span class="o">=</span> <span class="ne">BezierCurve</span><span class="p">(</span> <span class="n">controls</span> <span class="p">)</span>
</span><span id="__span-6-21"><span class="n">tangent</span> <span class="o">=</span> <span class="n">bezier</span><span class="o">.</span><span class="n">Derive</span><span class="p">(</span> <span class="p">)</span>
</span><span id="__span-6-22">
</span><span id="__span-6-23"><span class="n">point</span> <span class="o">=</span> <span class="n">bezier</span><span class="o">.</span><span class="n">Evaluate</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span>
</span><span id="__span-6-24"><span class="n">vector</span> <span class="o">=</span> <span class="ne">Vector3d</span><span class="p">(</span> <span class="n">tangent</span><span class="o">.</span><span class="n">Evaluate</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span> <span class="p">)</span>
</span><span id="__span-6-25"><span class="n">vector</span><span class="o">.</span><span class="n">Unitize</span><span class="p">(</span> <span class="p">)</span>
</span></code></pre></div>
<p>Higher order derivatives can be computed using the same principle. The <code>Derivatives( )</code> method computes a number of requested derivatives which can be used for producing the tangent, normal, frame, curvature and torsion as seen below.</p>
<div class="highlight"><pre><span></span><code><span id="__span-7-1"><span class="k">class</span> <span class="nc">BezierCurve</span><span class="p">:</span>
</span><span id="__span-7-2"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Derivatives at Parameter</span>
</span><span id="__span-7-3"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-7-4">    <span class="k">def</span> <span class="nf">Derivatives</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="p">):</span>
</span><span id="__span-7-5">        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Degree</span>
</span><span id="__span-7-6">        <span class="k">if</span><span class="p">(</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span>
</span><span id="__span-7-7">            <span class="n">n</span> <span class="o">&gt;</span> <span class="n">d</span> <span class="p">):</span>
</span><span id="__span-7-8">            <span class="n">n</span> <span class="o">=</span> <span class="n">d</span>
</span><span id="__span-7-9">        <span class="n">curve</span> <span class="o">=</span> <span class="bp">self</span>
</span><span id="__span-7-10">        <span class="n">delta</span> <span class="o">=</span> <span class="p">[</span><span class="n">curve</span><span class="o">.</span><span class="n">Evaluate</span><span class="p">(</span> <span class="n">t</span> <span class="p">)]</span> <span class="o">*</span> <span class="p">(</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">)</span>
</span><span id="__span-7-11">        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">):</span>
</span><span id="__span-7-12">            <span class="n">curve</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">Derive</span><span class="p">(</span> <span class="p">)</span>
</span><span id="__span-7-13">            <span class="n">delta</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">Evaluate</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span>
</span><span id="__span-7-14">        <span class="k">return</span> <span class="n">delta</span>
</span><span id="__span-7-15">
</span><span id="__span-7-16"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Tangent Vector</span>
</span><span id="__span-7-17"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-7-18">    <span class="k">def</span> <span class="nf">Tangent</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">t</span> <span class="p">):</span>
</span><span id="__span-7-19">        <span class="n">_</span><span class="p">,</span> <span class="n">u</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Derivatives</span><span class="p">(</span> <span class="n">t</span><span class="p">,</span> <span class="mi">1</span> <span class="p">)</span>
</span><span id="__span-7-20">        <span class="n">u</span><span class="o">.</span><span class="n">Unitize</span><span class="p">(</span> <span class="p">)</span>
</span><span id="__span-7-21">        <span class="k">return</span> <span class="n">u</span>
</span><span id="__span-7-22">
</span><span id="__span-7-23"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Normal Vector</span>
</span><span id="__span-7-24"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-7-25">    <span class="k">def</span> <span class="nf">Normal</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">t</span> <span class="p">):</span>
</span><span id="__span-7-26">        <span class="n">_</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Derivatives</span><span class="p">(</span> <span class="n">t</span><span class="p">,</span> <span class="mi">2</span> <span class="p">)</span>
</span><span id="__span-7-27">        <span class="n">n</span> <span class="o">=</span> <span class="ne">Vector3d</span><span class="o">.</span><span class="n">CrossProduct</span><span class="p">(</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="p">)</span>
</span><span id="__span-7-28">        <span class="n">n</span><span class="o">.</span><span class="n">Unitize</span><span class="p">(</span> <span class="p">)</span>
</span><span id="__span-7-29">        <span class="k">return</span> <span class="n">n</span>
</span><span id="__span-7-30">
</span><span id="__span-7-31"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Fresnet Frame</span>
</span><span id="__span-7-32"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-7-33">    <span class="k">def</span> <span class="nf">Frame</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">t</span> <span class="p">):</span>
</span><span id="__span-7-34">        <span class="n">o</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Derivatives</span><span class="p">(</span> <span class="n">t</span><span class="p">,</span> <span class="mi">2</span> <span class="p">)</span>
</span><span id="__span-7-35">        <span class="k">return</span> <span class="ne">Plane</span><span class="p">(</span> <span class="n">o</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="p">)</span>
</span><span id="__span-7-36">
</span><span id="__span-7-37"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Curvature</span>
</span><span id="__span-7-38"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-7-39">    <span class="k">def</span> <span class="nf">Curvature</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">t</span> <span class="p">):</span>
</span><span id="__span-7-40">        <span class="n">_</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Derivatives</span><span class="p">(</span> <span class="n">t</span><span class="p">,</span> <span class="mi">2</span> <span class="p">)</span>
</span><span id="__span-7-41">        <span class="k">return</span> <span class="ne">Vector3d</span><span class="o">.</span><span class="n">CrossProduct</span><span class="p">(</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="p">)</span><span class="o">.</span><span class="n">Length</span> <span class="o">/</span> <span class="n">u</span><span class="o">.</span><span class="n">Length</span> <span class="o">**</span> <span class="mi">3</span>
</span><span id="__span-7-42">
</span><span id="__span-7-43"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Torsion</span>
</span><span id="__span-7-44"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-7-45">    <span class="k">def</span> <span class="nf">Torsion</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">t</span> <span class="p">):</span>
</span><span id="__span-7-46">        <span class="n">o</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Derivatives</span><span class="p">(</span> <span class="n">t</span><span class="p">,</span> <span class="mi">3</span> <span class="p">)</span>
</span><span id="__span-7-47">        <span class="n">x</span> <span class="o">=</span> <span class="ne">Vector3d</span><span class="o">.</span><span class="n">CrossProduct</span><span class="p">(</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="p">)</span>
</span><span id="__span-7-48">        <span class="k">return</span> <span class="p">(</span> <span class="n">x</span> <span class="o">*</span> <span class="n">w</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="n">x</span> <span class="o">*</span> <span class="n">x</span> <span class="p">)</span>
</span></code></pre></div>
<h3 id="application_1">Application</h3>
<p>Rhino implements Bezier curves via the <code>BezierCurve</code> class, see <a href="https://developer.rhino3d.com/api/rhinocommon/rhino.geometry.beziercurve">documentation</a>. However, Bezier curves can be represented using Nurbs curves, where their degree equals their number of points plus one, as seen below.</p>
<div class="highlight"><pre><span></span><code><span id="__span-8-1"><span class="sd">&quot;&quot;&quot; Using Rhino&#39;s Bezier Curve</span>
</span><span id="__span-8-2"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-8-3"><span class="kn">from</span> <span class="nn">Rhino.Geometry</span> <span class="kn">import</span> <span class="ne">BezierCurve</span>
</span><span id="__span-8-4">
</span><span id="__span-8-5"><span class="n">curve</span> <span class="o">=</span> <span class="ne">BezierCurve</span><span class="p">(</span> <span class="n">controls</span> <span class="p">)</span>
</span><span id="__span-8-6"><span class="n">point</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">PointAt</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span>
</span><span id="__span-8-7"><span class="n">tangent</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">TangentAt</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span>
</span><span id="__span-8-8">
</span><span id="__span-8-9"><span class="sd">&quot;&quot;&quot; Using Rhino&#39;s Nurbs Curve</span>
</span><span id="__span-8-10"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-8-11"><span class="kn">from</span> <span class="nn">Rhino.Geometry</span> <span class="kn">import</span> <span class="ne">NurbsCurve</span>
</span><span id="__span-8-12">
</span><span id="__span-8-13"><span class="n">periodic</span><span class="p">,</span> <span class="n">degree</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span> <span class="n">controls</span> <span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="__span-8-14"><span class="n">curve</span> <span class="o">=</span> <span class="ne">NurbsCurve</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span> <span class="n">periodic</span><span class="p">,</span> <span class="n">degree</span><span class="p">,</span> <span class="n">controls</span> <span class="p">)</span>
</span><span id="__span-8-15"><span class="n">point</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">PointAt</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span>
</span><span id="__span-8-16"><span class="n">tangent</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">TangentAt</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span>
</span></code></pre></div>
<h2 id="bspline-curves">BSpline Curves</h2>
<h3 id="definition_3">Definition</h3>
<p>Basis splines solve the limitation of Bezier curves, where a curve's degree is bound to the number of its control points. BSplines achieve this by stitching lower degree polynomials in piece-wise continuous manner, see <a href="https://en.wikipedia.org/wiki/B-spline">additional</a> information. Stitching is encoded using a list with the domain parameters where the pieces of polynomial of the same degree meet one another, known as the knot vector.</p>
<div class="highlight"><pre><span></span><code><span id="__span-9-1"><span class="k">class</span> <span class="nc">BasisSplineCurve</span><span class="p">:</span>
</span><span id="__span-9-2"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Construction</span>
</span><span id="__span-9-3"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-9-4">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">degree</span> <span class="p">):</span>
</span><span id="__span-9-5">        <span class="bp">self</span><span class="o">.</span><span class="n">Points</span> <span class="o">=</span> <span class="n">points</span>
</span><span id="__span-9-6">        <span class="bp">self</span><span class="o">.</span><span class="n">Degree</span> <span class="o">=</span> <span class="n">degree</span>
</span><span id="__span-9-7">        <span class="bp">self</span><span class="o">.</span><span class="n">Knots</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ClampedKnots</span><span class="p">(</span> <span class="p">)</span>
</span><span id="__span-9-8">
</span><span id="__span-9-9"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Open Knot Vector</span>
</span><span id="__span-9-10"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-9-11">    <span class="k">def</span> <span class="nf">OpenKnots</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
</span><span id="__span-9-12">        <span class="n">n</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">Points</span> <span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">Degree</span>
</span><span id="__span-9-13">        <span class="k">return</span> <span class="p">[</span><span class="n">i</span> <span class="o">/</span> <span class="p">(</span> <span class="n">n</span> <span class="o">+</span> <span class="n">d</span> <span class="p">)</span>
</span><span id="__span-9-14">            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="n">n</span> <span class="o">+</span> <span class="n">d</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">)]</span>
</span><span id="__span-9-15">
</span><span id="__span-9-16"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Clamped Knot Vector</span>
</span><span id="__span-9-17"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-9-18">    <span class="k">def</span> <span class="nf">ClampedKnots</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
</span><span id="__span-9-19">        <span class="n">n</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">Points</span> <span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">Degree</span>
</span><span id="__span-9-20">        <span class="n">k_min</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">]</span> <span class="o">*</span> <span class="n">d</span>
</span><span id="__span-9-21">        <span class="n">k_mid</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="o">/</span> <span class="p">(</span> <span class="n">n</span> <span class="o">-</span> <span class="n">d</span> <span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="n">n</span> <span class="o">-</span> <span class="n">d</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">)]</span>
</span><span id="__span-9-22">        <span class="n">k_max</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]</span> <span class="o">*</span> <span class="n">d</span>
</span><span id="__span-9-23">        <span class="k">return</span> <span class="n">k_min</span> <span class="o">+</span> <span class="n">k_mid</span> <span class="o">+</span> <span class="n">k_max</span>
</span><span id="__span-9-24">
</span><span id="__span-9-25"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Periodic Knot Vector</span>
</span><span id="__span-9-26"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-9-27">    <span class="k">def</span> <span class="nf">PeriodicKnots</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
</span><span id="__span-9-28">        <span class="n">n</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">Points</span> <span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">Degree</span>
</span><span id="__span-9-29">        <span class="k">return</span> <span class="p">[(</span> <span class="n">i</span> <span class="o">-</span> <span class="n">d</span>  <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="n">n</span> <span class="o">-</span> <span class="n">d</span> <span class="p">)</span>
</span><span id="__span-9-30">            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="n">n</span> <span class="o">+</span> <span class="n">d</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">)]</span>
</span></code></pre></div>
<h3 id="evaluation_1">Evaluation</h3>
<p>Evaluating points on BSplines is slightly more involved compared to Bezier curves.  However, the logic is not unlike De Casteljau's repeated interpolation scheme. First, the polynomial curve piece is identified by locating the knot interval <code>[k_min, k_max]</code> containing the parameter <code>t</code>. Finally, adjacent control points are interpolated in a linear fashion using the basis functions associated with the knot values. Only up to degree + 1 points are used unlike Bezier curves which process the entire list of control points. The <code>Evaluate( )</code> method below follows the <a href="https://en.wikipedia.org/wiki/De_Boor's_algorithm">De Boor's</a> algorithm. A more efficient implementation is presented by Piegl and Tiller in <a href="https://link.springer.com/book/10.1007/978-3-642-59223-2">The NURBS Book</a>.</p>
<div class="highlight"><pre><span></span><code><span id="__span-10-1"><span class="k">class</span> <span class="nc">BasisSplineCurve</span><span class="p">:</span>
</span><span id="__span-10-2"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Find Knot Span Containing Parameter</span>
</span><span id="__span-10-3"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-10-4">    <span class="k">def</span> <span class="nf">KnotSpan</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">t</span> <span class="p">):</span>
</span><span id="__span-10-5">        <span class="n">n</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">Points</span> <span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">Degree</span>
</span><span id="__span-10-6">        <span class="k">if</span><span class="p">(</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Knots</span><span class="p">[</span><span class="n">d</span><span class="p">]</span> <span class="p">):</span> <span class="k">return</span> <span class="n">d</span><span class="p">,</span> <span class="n">d</span>
</span><span id="__span-10-7">        <span class="k">if</span><span class="p">(</span> <span class="n">t</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Knots</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="p">):</span> <span class="k">return</span> <span class="n">d</span><span class="p">,</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="__span-10-8">        <span class="k">for</span> <span class="n">knot</span><span class="p">,</span> <span class="p">(</span> <span class="n">k_min</span><span class="p">,</span> <span class="n">k_max</span> <span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
</span><span id="__span-10-9">                <span class="nb">zip</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">Knots</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">Knots</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="p">)</span> <span class="p">):</span>
</span><span id="__span-10-10">            <span class="k">if</span><span class="p">(</span> <span class="n">k_min</span> <span class="o">&lt;=</span> <span class="n">t</span> <span class="o">&lt;</span>  <span class="n">k_max</span> <span class="ow">or</span>
</span><span id="__span-10-11">                <span class="n">k_min</span> <span class="o">&lt;</span>  <span class="n">t</span> <span class="o">&lt;=</span> <span class="n">k_max</span> <span class="p">):</span>
</span><span id="__span-10-12">                <span class="k">return</span> <span class="n">d</span><span class="p">,</span> <span class="n">knot</span>
</span><span id="__span-10-13">
</span><span id="__span-10-14"><span class="w">    </span><span class="sd">&quot;&quot;&quot; De Boor&#39;s Algorithm</span>
</span><span id="__span-10-15"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-10-16">    <span class="k">def</span> <span class="nf">Evaluate</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">t</span> <span class="p">):</span>
</span><span id="__span-10-17">        <span class="c1">#-- Relevant Knots and Points</span>
</span><span id="__span-10-18">        <span class="c1">#--</span>
</span><span id="__span-10-19">        <span class="n">d</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">KnotSpan</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span>
</span><span id="__span-10-20">        <span class="n">P</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Points</span><span class="p">[</span><span class="n">k</span><span class="o">-</span><span class="n">d</span><span class="p">:</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
</span><span id="__span-10-21">
</span><span id="__span-10-22">        <span class="c1">#-- Recursive Interpolations</span>
</span><span id="__span-10-23">        <span class="c1">#--</span>
</span><span id="__span-10-24">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="n">d</span> <span class="p">):</span>
</span><span id="__span-10-25">            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="n">d</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span> <span class="p">):</span>
</span><span id="__span-10-26">                <span class="n">to</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Knots</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="n">k</span> <span class="o">-</span> <span class="n">d</span><span class="p">]</span>
</span><span id="__span-10-27">                <span class="n">ti</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Knots</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="n">k</span> <span class="o">-</span> <span class="n">i</span><span class="p">]</span>
</span><span id="__span-10-28">
</span><span id="__span-10-29">                <span class="n">alpha</span> <span class="o">=</span> <span class="p">(</span> <span class="n">t</span> <span class="o">-</span> <span class="n">to</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="n">ti</span> <span class="o">-</span> <span class="n">to</span> <span class="p">)</span>
</span><span id="__span-10-30">                <span class="n">omega</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">alpha</span>
</span><span id="__span-10-31">
</span><span id="__span-10-32">                <span class="n">P</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">omega</span> <span class="o">*</span> <span class="n">P</span><span class="p">[</span><span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">alpha</span> <span class="o">*</span> <span class="n">P</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
</span><span id="__span-10-33">        <span class="k">return</span> <span class="n">P</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span></code></pre></div>
<p>The demonstration below constructs a BSpline, prints its knot vector and evaluates a series of points along its domain. Note that the repeated zeros and ones in the knot vector are for keeping the basis functions evaluation within bounds and forcing the curve to pass through the first and last control points.</p>
<div class="highlight"><pre><span></span><code><span id="__span-11-1"><span class="sd">&quot;&quot;&quot; Control Points</span>
</span><span id="__span-11-2"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-11-3"><span class="n">controls</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-11-4">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-11-5">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-11-6">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-11-7">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">3.0</span><span class="p">,</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-11-8">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">)]</span>
</span><span id="__span-11-9">
</span><span id="__span-11-10"><span class="sd">&quot;&quot;&quot; Clamped BSpline Curve</span>
</span><span id="__span-11-11"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-11-12"><span class="n">curve</span> <span class="o">=</span> <span class="ne">BasisSplineCurve</span><span class="p">(</span> <span class="n">controls</span><span class="p">,</span> <span class="n">degree</span> <span class="o">=</span> <span class="mi">3</span> <span class="p">)</span>
</span><span id="__span-11-13"><span class="nb">print</span><span class="p">(</span> <span class="n">curve</span><span class="o">.</span><span class="n">Knots</span> <span class="p">)</span>
</span><span id="__span-11-14"><span class="c1">#  [ 0.0, 0.0, 0.0, 0.0, 0.5, 1.0, 1.0, 1.0, 1.0 ]</span>
</span><span id="__span-11-15"><span class="c1">#  | 0.0 * degree | unit range   | 1.0 * degree  |</span>
</span><span id="__span-11-16"><span class="c1">#  | clamped      | interpolated | clamped       |</span>
</span><span id="__span-11-17">
</span><span id="__span-11-18"><span class="sd">&quot;&quot;&quot; Open BSpline Curve</span>
</span><span id="__span-11-19"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-11-20"><span class="n">curve</span> <span class="o">=</span> <span class="ne">BasisSplineCurve</span><span class="p">(</span> <span class="n">controls</span><span class="p">,</span> <span class="n">degree</span> <span class="o">=</span> <span class="mi">3</span> <span class="p">)</span>
</span><span id="__span-11-21"><span class="n">curve</span><span class="o">.</span><span class="n">Knots</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">OpenKnots</span><span class="p">(</span> <span class="p">)</span>
</span><span id="__span-11-22"><span class="nb">print</span><span class="p">(</span> <span class="n">curve</span><span class="o">.</span><span class="n">Knots</span> <span class="p">)</span>
</span><span id="__span-11-23"><span class="c1"># [0.0, 0.125, 0.25, 0.375, 0.5, 0.625, 0.75, 0.875, 1.0]</span>
</span><span id="__span-11-24"><span class="c1"># |                 interpolated                        |</span>
</span><span id="__span-11-25">
</span><span id="__span-11-26"><span class="n">count</span>  <span class="o">=</span> <span class="mi">128</span>
</span><span id="__span-11-27"><span class="n">points</span> <span class="o">=</span> <span class="p">[</span><span class="n">curve</span><span class="o">.</span><span class="n">Evaluate</span><span class="p">(</span> <span class="n">index</span> <span class="o">/</span> <span class="p">(</span> <span class="n">count</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">)</span>
</span><span id="__span-11-28">    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="n">count</span> <span class="p">)]</span>
</span></code></pre></div>
<h3 id="periodic-curves">Periodic Curves</h3>
<p>Periodic curves are represented by first wrapping the last control points over the first control points, by repeating as many as the degree of the curve, and then using a periodic knot vector.</p>
<div class="highlight"><pre><span></span><code><span id="__span-12-1"><span class="sd">&quot;&quot;&quot; Control Points</span>
</span><span id="__span-12-2"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-12-3"><span class="n">controls</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-12-4">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span> <span class="c1">#-- 0</span>
</span><span id="__span-12-5">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span> <span class="c1">#-- 1</span>
</span><span id="__span-12-6">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span> <span class="c1">#-- 2</span>
</span><span id="__span-12-7">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span> <span class="c1">#-- wrap 0</span>
</span><span id="__span-12-8">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span> <span class="c1">#-- wrap 1</span>
</span><span id="__span-12-9">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">)]</span> <span class="c1">#-- wrap 2</span>
</span><span id="__span-12-10">
</span><span id="__span-12-11"><span class="sd">&quot;&quot;&quot; Periodic BSpline Curve</span>
</span><span id="__span-12-12"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-12-13"><span class="n">curve</span> <span class="o">=</span> <span class="ne">BasisSplineCurve</span><span class="p">(</span> <span class="n">controls</span><span class="p">,</span> <span class="n">degree</span> <span class="o">=</span> <span class="mi">3</span> <span class="p">)</span>
</span><span id="__span-12-14"><span class="n">curve</span><span class="o">.</span><span class="n">Knots</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">PeriodicKnots</span><span class="p">(</span> <span class="p">)</span>
</span><span id="__span-12-15"><span class="nb">print</span><span class="p">(</span> <span class="n">curve</span><span class="o">.</span><span class="n">Knots</span> <span class="p">)</span>
</span><span id="__span-12-16"><span class="c1">#  [-1.5, -1.0, -0.5, 0.0, 0.5, 1.0, 1.5, 2.0, 2.5]</span>
</span><span id="__span-12-17"><span class="c1">#  | wrap backward  | unit range   | wrap forward |</span>
</span><span id="__span-12-18"><span class="c1">#  | periodic       | interpolated | periodic     |</span>
</span></code></pre></div>
<h3 id="derivatives_1">Derivatives</h3>
<p>The derivative of a BSpline curve is another one-degree-lower BSpline curve. Its control points are computed from the differences of the original control points, scaled by the degree and knot span differences. Finally, its knot vector is a copy of the original knots without the first and last items, see <a href="https://pages.mtu.edu/~shene/COURSES/cs3621/NOTES/spline/B-spline/bspline-derv.html">derivation details</a>. Higher order derivatives and differential properties are computed using the same principles as seen in Bezier curves.</p>
<div class="highlight"><pre><span></span><code><span id="__span-13-1"><span class="k">class</span> <span class="nc">BasisSplineCurve</span><span class="p">:</span>
</span><span id="__span-13-2"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Derivative / Hodograph Curve</span>
</span><span id="__span-13-3"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-13-4">    <span class="k">def</span> <span class="nf">Derive</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
</span><span id="__span-13-5">        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Degree</span>
</span><span id="__span-13-6">        <span class="n">points</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="__span-13-7">        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">Points</span> <span class="p">)</span> <span class="p">):</span>
</span><span id="__span-13-8">            <span class="n">po</span><span class="p">,</span> <span class="n">ko</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Points</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">Knots</span><span class="p">[</span><span class="n">i</span>  <span class="p">]</span>
</span><span id="__span-13-9">            <span class="n">pi</span><span class="p">,</span> <span class="n">ki</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Points</span><span class="p">[</span><span class="n">i</span>  <span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">Knots</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">d</span><span class="p">]</span>
</span><span id="__span-13-10">            <span class="n">point</span> <span class="o">=</span> <span class="p">(</span> <span class="n">pi</span> <span class="o">-</span> <span class="n">po</span> <span class="p">)</span> <span class="o">*</span> <span class="n">d</span> <span class="o">/</span> <span class="p">(</span> <span class="n">ki</span> <span class="o">-</span> <span class="n">ko</span> <span class="p">)</span>
</span><span id="__span-13-11">            <span class="n">points</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">point</span> <span class="p">)</span>
</span><span id="__span-13-12">        <span class="n">curve</span> <span class="o">=</span> <span class="ne">BasisSplineCurve</span><span class="p">(</span> <span class="n">points</span><span class="p">,</span> <span class="n">d</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span>
</span><span id="__span-13-13">        <span class="n">curve</span><span class="o">.</span><span class="n">Knots</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Knots</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="__span-13-14">        <span class="k">return</span> <span class="n">curve</span>
</span><span id="__span-13-15">
</span><span id="__span-13-16">    <span class="k">def</span> <span class="nf">Derivatives</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="p">):</span>
</span><span id="__span-13-17">        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Degree</span>
</span><span id="__span-13-18">        <span class="k">if</span><span class="p">(</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span>
</span><span id="__span-13-19">            <span class="n">n</span> <span class="o">&gt;</span> <span class="n">d</span> <span class="p">):</span>
</span><span id="__span-13-20">            <span class="n">n</span> <span class="o">=</span> <span class="n">d</span>
</span><span id="__span-13-21">        <span class="n">curve</span> <span class="o">=</span> <span class="bp">self</span>
</span><span id="__span-13-22">        <span class="n">delta</span> <span class="o">=</span> <span class="p">[</span><span class="n">curve</span><span class="o">.</span><span class="n">Evaluate</span><span class="p">(</span> <span class="n">t</span> <span class="p">)]</span> <span class="o">*</span> <span class="p">(</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">)</span>
</span><span id="__span-13-23">        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">):</span>
</span><span id="__span-13-24">            <span class="n">curve</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">Derive</span><span class="p">(</span> <span class="p">)</span>
</span><span id="__span-13-25">            <span class="n">delta</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">Evaluate</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span>
</span><span id="__span-13-26">        <span class="k">return</span> <span class="n">delta</span>
</span><span id="__span-13-27">
</span><span id="__span-13-28"><span class="sd">&quot;&quot;&quot; BSpline Curve Derivative</span>
</span><span id="__span-13-29"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-13-30"><span class="n">controls</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-13-31">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-13-32">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-13-33">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-13-34">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">3.0</span><span class="p">,</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-13-35">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">)]</span>
</span><span id="__span-13-36">
</span><span id="__span-13-37"><span class="n">bspline</span> <span class="o">=</span> <span class="ne">BasisSplineCurve</span><span class="p">(</span> <span class="n">controls</span><span class="p">,</span> <span class="n">degree</span> <span class="o">=</span> <span class="mi">3</span> <span class="p">)</span>
</span><span id="__span-13-38"><span class="n">point</span> <span class="o">=</span> <span class="n">bspline</span><span class="o">.</span><span class="n">Evaluate</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span>
</span><span id="__span-13-39"><span class="n">plane</span> <span class="o">=</span> <span class="n">bspline</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span>
</span></code></pre></div>
<h3 id="application_2">Application</h3>
<p>Rhino does not provide a specialized BSpline class but the functionality is supported via Nurbs curves, see next section, which represent a superset or generalization thereof.</p>
<div class="highlight"><pre><span></span><code><span id="__span-14-1"><span class="sd">&quot;&quot;&quot; Using Rhino&#39;s Nurbs Curve</span>
</span><span id="__span-14-2"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-14-3"><span class="kn">from</span> <span class="nn">Rhino.Geometry</span> <span class="kn">import</span> <span class="ne">NurbsCurve</span>
</span><span id="__span-14-4">
</span><span id="__span-14-5"><span class="n">controls</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-14-6">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-14-7">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-14-8">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-14-9">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">3.0</span><span class="p">,</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-14-10">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">)]</span>
</span><span id="__span-14-11">
</span><span id="__span-14-12"><span class="n">periodic</span><span class="p">,</span> <span class="n">degree</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="mi">3</span>
</span><span id="__span-14-13"><span class="n">curve</span> <span class="o">=</span> <span class="ne">NurbsCurve</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span> <span class="n">periodic</span><span class="p">,</span> <span class="n">degree</span><span class="p">,</span> <span class="n">controls</span> <span class="p">)</span>
</span><span id="__span-14-14"><span class="nb">print</span><span class="p">(</span> <span class="nb">list</span><span class="p">(</span> <span class="n">curve</span><span class="o">.</span><span class="n">Knots</span> <span class="p">)</span> <span class="p">)</span>
</span><span id="__span-14-15"><span class="c1"># [ 0.0, 0.0, 0.0, 1.0, 2.0, 2.0, 2.0 ]</span>
</span><span id="__span-14-16"><span class="c1"># | clamped | interpolated | clamped  |</span>
</span></code></pre></div>
<h2 id="nurbs-curves">Nurbs Curves</h2>
<h3 id="definition_4">Definition</h3>
<p>Nurbs or non-uniform rational basis splines extend BSplines by being able to represent rational curves such as circles and other conic sections, see <a href="https://en.wikipedia.org/wiki/Non-uniform_rational_B-spline">additional</a> information. This is achieved by introducing a 4th coordinate for each control point known as the weight. The notion of using 4D instead of 3D points originates in <a href="https://en.wikipedia.org/wiki/Projective_geometry">projective geometry</a>, where an additional coordinate is used to allow representing points at infinity, see Gerald Farin's <a href="https://www.farinhansford.com/books/nurbs/">NURBS for Curve and Surface Design</a> for additional information.</p>
<h3 id="evaluation_2">Evaluation</h3>
<p>The De Boor's algorithm can be used for evaluating Nurbs curves. First the rational control points, about the knot interval containing the parameter, are decoupled and pre-scaled by their weights. Then the computed non-rational points and weights are used to define two BSpline curves within the reduced knot vector. Finally, both curves are evaluated and their quotient is returned.</p>
<p>Note that BSpline curves express a general polynomial scheme for smoothly interpolating values, which may be points or just simple numbers as in the case of the weight's curve.</p>
<div class="highlight"><pre><span></span><code><span id="__span-15-1"><span class="sd">&quot;&quot;&quot; Nurbs Curve</span>
</span><span id="__span-15-2"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-15-3"><span class="k">class</span> <span class="nc">RationalBSplineCurve</span><span class="p">(</span> <span class="ne">BasisSplineCurve</span> <span class="p">):</span>
</span><span id="__span-15-4"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Construction</span>
</span><span id="__span-15-5"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-15-6">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">degree</span> <span class="p">):</span>
</span><span id="__span-15-7">        <span class="ne">BasisSplineCurve</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">degree</span> <span class="p">)</span>
</span><span id="__span-15-8">
</span><span id="__span-15-9"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Decouple Points and Weights</span>
</span><span id="__span-15-10"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-15-11">    <span class="k">def</span> <span class="nf">Decouple</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">points</span> <span class="p">):</span>
</span><span id="__span-15-12">        <span class="n">P</span> <span class="o">=</span> <span class="p">[</span><span class="ne">Point3d</span><span class="p">(</span> <span class="n">p</span><span class="o">.</span><span class="n">X</span> <span class="o">*</span> <span class="n">p</span><span class="o">.</span><span class="n">W</span><span class="p">,</span>
</span><span id="__span-15-13">                      <span class="n">p</span><span class="o">.</span><span class="n">Y</span> <span class="o">*</span> <span class="n">p</span><span class="o">.</span><span class="n">W</span><span class="p">,</span>
</span><span id="__span-15-14">                      <span class="n">p</span><span class="o">.</span><span class="n">Z</span> <span class="o">*</span> <span class="n">p</span><span class="o">.</span><span class="n">W</span> <span class="p">)</span>
</span><span id="__span-15-15">                 <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points</span><span class="p">]</span>
</span><span id="__span-15-16">        <span class="n">W</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">W</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">points</span><span class="p">]</span>
</span><span id="__span-15-17">        <span class="k">return</span> <span class="n">P</span><span class="p">,</span> <span class="n">W</span>
</span><span id="__span-15-18">
</span><span id="__span-15-19"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Evaluate Point</span>
</span><span id="__span-15-20"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-15-21">    <span class="k">def</span> <span class="nf">Evaluate</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">t</span> <span class="p">):</span>
</span><span id="__span-15-22">        <span class="n">d</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">KnotSpan</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span>
</span><span id="__span-15-23">        <span class="n">P</span><span class="p">,</span> <span class="n">W</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Decouple</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">Points</span><span class="p">[</span><span class="n">k</span><span class="o">-</span><span class="n">d</span><span class="p">:</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>
</span><span id="__span-15-24">        <span class="n">K</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Knots</span><span class="p">[</span><span class="n">k</span><span class="o">-</span><span class="n">d</span><span class="p">:</span><span class="n">k</span><span class="o">+</span><span class="n">d</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
</span><span id="__span-15-25">
</span><span id="__span-15-26">        <span class="n">A</span> <span class="o">=</span> <span class="ne">BasisSplineCurve</span><span class="p">(</span> <span class="n">P</span><span class="p">,</span> <span class="n">d</span> <span class="p">);</span> <span class="n">A</span><span class="o">.</span><span class="n">Knots</span> <span class="o">=</span> <span class="n">K</span>
</span><span id="__span-15-27">        <span class="n">w</span> <span class="o">=</span> <span class="ne">BasisSplineCurve</span><span class="p">(</span> <span class="n">W</span><span class="p">,</span> <span class="n">d</span> <span class="p">);</span> <span class="n">w</span><span class="o">.</span><span class="n">Knots</span> <span class="o">=</span> <span class="n">K</span>
</span><span id="__span-15-28">
</span><span id="__span-15-29">        <span class="k">return</span> <span class="n">A</span><span class="o">.</span><span class="n">Evaluate</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span> <span class="o">/</span> <span class="n">w</span><span class="o">.</span><span class="n">Evaluate</span><span class="p">(</span> <span class="n">t</span> <span class="p">)</span>
</span><span id="__span-15-30">
</span><span id="__span-15-31"><span class="sd">&quot;&quot;&quot; Rational Cubic Curve</span>
</span><span id="__span-15-32"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-15-33"><span class="n">controls</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-15-34">    <span class="n">Point4d</span><span class="p">(</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span> <span class="p">),</span>
</span><span id="__span-15-35">    <span class="n">Point4d</span><span class="p">(</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">5.0</span> <span class="p">),</span> <span class="c1">#-- Rational</span>
</span><span id="__span-15-36">    <span class="n">Point4d</span><span class="p">(</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span> <span class="p">),</span>
</span><span id="__span-15-37">    <span class="n">Point4d</span><span class="p">(</span> <span class="mf">3.0</span><span class="p">,</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">5.0</span> <span class="p">),</span> <span class="c1">#-- Rational</span>
</span><span id="__span-15-38">    <span class="n">Point4d</span><span class="p">(</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span> <span class="p">)]</span>
</span><span id="__span-15-39">
</span><span id="__span-15-40"><span class="n">curve</span> <span class="o">=</span> <span class="ne">RationalBSplineCurve</span><span class="p">(</span> <span class="n">controls</span><span class="p">,</span> <span class="mi">3</span> <span class="p">)</span>
</span><span id="__span-15-41">
</span><span id="__span-15-42"><span class="sd">&quot;&quot;&quot; Rational Circle</span>
</span><span id="__span-15-43"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-15-44"><span class="n">r</span> <span class="o">=</span> <span class="mf">1.0</span>                            <span class="c1">#-- Radius</span>
</span><span id="__span-15-45"><span class="n">o</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="ne">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span> <span class="mf">2.0</span> <span class="p">)</span>         <span class="c1">#-- Weight</span>
</span><span id="__span-15-46"><span class="n">controls</span> <span class="o">=</span> <span class="p">[</span><span class="n">Point4d</span><span class="p">(</span> <span class="n">r</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">),</span>
</span><span id="__span-15-47">            <span class="n">Point4d</span><span class="p">(</span> <span class="n">r</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">o</span> <span class="p">),</span>
</span><span id="__span-15-48">            <span class="n">Point4d</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">),</span>
</span><span id="__span-15-49">            <span class="n">Point4d</span><span class="p">(</span><span class="o">-</span><span class="n">r</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">o</span> <span class="p">),</span>
</span><span id="__span-15-50">
</span><span id="__span-15-51">            <span class="n">Point4d</span><span class="p">(</span><span class="o">-</span><span class="n">r</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">),</span>
</span><span id="__span-15-52">            <span class="n">Point4d</span><span class="p">(</span><span class="o">-</span><span class="n">r</span><span class="p">,</span><span class="o">-</span><span class="n">r</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">o</span> <span class="p">),</span>
</span><span id="__span-15-53">            <span class="n">Point4d</span><span class="p">(</span> <span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="n">r</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">),</span>
</span><span id="__span-15-54">            <span class="n">Point4d</span><span class="p">(</span> <span class="n">r</span><span class="p">,</span><span class="o">-</span><span class="n">r</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">o</span> <span class="p">)]</span>
</span><span id="__span-15-55"><span class="n">controls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">controls</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
</span><span id="__span-15-56">
</span><span id="__span-15-57"><span class="n">circle</span> <span class="o">=</span> <span class="ne">RationalBSplineCurve</span><span class="p">(</span> <span class="n">controls</span><span class="p">,</span> <span class="mi">2</span> <span class="p">)</span>
</span><span id="__span-15-58"><span class="n">circle</span><span class="o">.</span><span class="n">Knots</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.00</span><span class="p">,</span> <span class="mf">0.00</span><span class="p">,</span> <span class="mf">0.00</span><span class="p">,</span>
</span><span id="__span-15-59">                <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.50</span><span class="p">,</span>
</span><span id="__span-15-60">                <span class="mf">0.50</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span>
</span><span id="__span-15-61">                <span class="mf">1.00</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">]</span>
</span></code></pre></div>
<h3 id="derivatives_2">Derivatives</h3>
<p>The derivatives of Nurbs curves are significantly more complicated when compared to BSplines, see <a href="https://en.wikipedia.org/wiki/Quotient_rule">quotient rule</a>. Additionally, there is no hodograph Nurbs curve representation. Therefore, they are computed per parameter. Conceptually, a Nurbs curve is converted into two BSpline curves, one for the pre-weighted control points and one for the weights themselves. Their derivatives are computed and their combinations are used to reconstruct the Nurbs curve's derivatives, see <a href="https://link.springer.com/book/10.1007/978-3-642-59223-2">The NURBS Book</a> for additional information.</p>
<div class="highlight"><pre><span></span><code><span id="__span-16-1"><span class="k">class</span> <span class="nc">RationalBSplineCurve</span><span class="p">(</span> <span class="ne">BasisSplineCurve</span> <span class="p">):</span>
</span><span id="__span-16-2"><span class="w">    </span><span class="sd">&quot;&quot;&quot; Nurbs Derivatives</span>
</span><span id="__span-16-3"><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="__span-16-4">    <span class="k">def</span> <span class="nf">Derivatives</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="p">):</span>
</span><span id="__span-16-5">        <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Degree</span>
</span><span id="__span-16-6">        <span class="k">if</span><span class="p">(</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span>
</span><span id="__span-16-7">            <span class="n">n</span> <span class="o">&gt;</span> <span class="n">d</span> <span class="p">):</span>
</span><span id="__span-16-8">            <span class="n">n</span> <span class="o">=</span> <span class="n">d</span>
</span><span id="__span-16-9">
</span><span id="__span-16-10"><span class="w">        </span><span class="sd">&quot;&quot;&quot; Non-Rational Derivatives</span>
</span><span id="__span-16-11"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-16-12">        <span class="n">P</span><span class="p">,</span> <span class="n">W</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Decouple</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">Points</span> <span class="p">)</span>
</span><span id="__span-16-13">        <span class="n">A</span> <span class="o">=</span> <span class="ne">BasisSplineCurve</span><span class="p">(</span> <span class="n">P</span><span class="p">,</span> <span class="n">d</span> <span class="p">);</span> <span class="n">A</span><span class="o">.</span><span class="n">Knots</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Knots</span>
</span><span id="__span-16-14">        <span class="n">w</span> <span class="o">=</span> <span class="ne">BasisSplineCurve</span><span class="p">(</span> <span class="n">W</span><span class="p">,</span> <span class="n">d</span> <span class="p">);</span> <span class="n">w</span><span class="o">.</span><span class="n">Knots</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Knots</span>
</span><span id="__span-16-15">
</span><span id="__span-16-16">        <span class="n">dA</span> <span class="o">=</span> <span class="n">A</span><span class="o">.</span><span class="n">Derivatives</span><span class="p">(</span> <span class="n">t</span><span class="p">,</span> <span class="n">n</span> <span class="p">)</span>
</span><span id="__span-16-17">        <span class="n">dw</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">Derivatives</span><span class="p">(</span> <span class="n">t</span><span class="p">,</span> <span class="n">n</span> <span class="p">)</span>
</span><span id="__span-16-18">
</span><span id="__span-16-19"><span class="w">        </span><span class="sd">&quot;&quot;&quot; Rational Derivatives</span>
</span><span id="__span-16-20"><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="__span-16-21">        <span class="n">D</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]</span> <span class="o">*</span> <span class="p">(</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">)</span>
</span><span id="__span-16-22">        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">):</span>
</span><span id="__span-16-23">            <span class="n">u</span> <span class="o">=</span> <span class="ne">Vector3d</span><span class="p">(</span> <span class="n">dA</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="p">)</span>
</span><span id="__span-16-24">            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="mi">1</span><span class="p">,</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">):</span>
</span><span id="__span-16-25">                <span class="n">u</span> <span class="o">-=</span> <span class="n">math_comb</span><span class="p">(</span> <span class="n">k</span><span class="p">,</span> <span class="n">i</span> <span class="p">)</span> <span class="o">*</span> <span class="n">dw</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">D</span><span class="p">[</span><span class="n">k</span> <span class="o">-</span> <span class="n">i</span><span class="p">]</span>
</span><span id="__span-16-26">            <span class="n">D</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">u</span> <span class="o">/</span> <span class="n">dw</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="__span-16-27">        <span class="k">return</span> <span class="n">D</span>
</span></code></pre></div>
<h3 id="application_3">Application</h3>
<p>Rhino provides an extensive range of methods for constructing and manipulating Nurbs curves, see <a href="https://developer.rhino3d.com/api/rhinocommon/rhino.geometry.nurbscurve#methods">documentation</a>. Note that construction of Nurbs curves is performed using the static methods starting with <code>NurbsCurve.Create*</code> instead of the class constructor.</p>
<div class="highlight"><pre><span></span><code><span id="__span-17-1"><span class="sd">&quot;&quot;&quot; Nurbs Curve Construction</span>
</span><span id="__span-17-2"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-17-3"><span class="n">controls</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-17-4">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-17-5">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-17-6">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-17-7">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">3.0</span><span class="p">,</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-17-8">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">)]</span>
</span><span id="__span-17-9">
</span><span id="__span-17-10"><span class="sd">&quot;&quot;&quot; Open Cubic BSpline</span>
</span><span id="__span-17-11"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-17-12"><span class="n">periodic</span><span class="p">,</span> <span class="n">degree</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="mi">3</span>
</span><span id="__span-17-13"><span class="n">curve</span> <span class="o">=</span> <span class="ne">NurbsCurve</span><span class="o">.</span><span class="n">Create</span><span class="p">(</span> <span class="n">periodic</span><span class="p">,</span> <span class="n">degree</span><span class="p">,</span> <span class="n">controls</span> <span class="p">)</span>
</span><span id="__span-17-14"><span class="nb">print</span><span class="p">(</span> <span class="nb">list</span><span class="p">(</span> <span class="n">curve</span><span class="o">.</span><span class="n">Knots</span> <span class="p">)</span> <span class="p">)</span>
</span><span id="__span-17-15"><span class="c1">#-- [0.0, 0.0, 0.0, 1.0, 2.0, 2.0, 2.0]</span>
</span><span id="__span-17-16">
</span><span id="__span-17-17"><span class="sd">&quot;&quot;&quot; Manual Nurbs Curve Construction</span>
</span><span id="__span-17-18"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-17-19"><span class="n">controls</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-17-20">    <span class="n">Point4d</span><span class="p">(</span> <span class="mf">1.5</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span> <span class="p">),</span>
</span><span id="__span-17-21">    <span class="n">Point4d</span><span class="p">(</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">5.0</span> <span class="p">),</span> <span class="c1">#-- Rational</span>
</span><span id="__span-17-22">    <span class="n">Point4d</span><span class="p">(</span> <span class="mf">3.5</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span> <span class="p">),</span>
</span><span id="__span-17-23">    <span class="n">Point4d</span><span class="p">(</span> <span class="mf">4.5</span><span class="p">,</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">5.0</span> <span class="p">),</span> <span class="c1">#-- Rational</span>
</span><span id="__span-17-24">    <span class="n">Point4d</span><span class="p">(</span> <span class="mf">5.5</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span> <span class="p">)]</span>
</span><span id="__span-17-25">
</span><span id="__span-17-26"><span class="n">dimensions</span><span class="p">,</span> <span class="n">degree</span><span class="p">,</span> <span class="n">rational</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="kc">True</span>
</span><span id="__span-17-27"><span class="n">curve</span> <span class="o">=</span> <span class="ne">NurbsCurve</span><span class="p">(</span> <span class="n">dimensions</span><span class="p">,</span>
</span><span id="__span-17-28">    <span class="n">rational</span><span class="p">,</span> <span class="n">degree</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span> <span class="n">controls</span> <span class="p">)</span> <span class="p">)</span>
</span><span id="__span-17-29">
</span><span id="__span-17-30"><span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span> <span class="n">controls</span> <span class="p">)</span> <span class="p">):</span>
</span><span id="__span-17-31">    <span class="n">curve</span><span class="o">.</span><span class="n">Points</span><span class="o">.</span><span class="n">SetPoint</span><span class="p">(</span> <span class="n">index</span><span class="p">,</span>
</span><span id="__span-17-32">        <span class="ne">Point3d</span><span class="p">(</span> <span class="n">controls</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">X</span><span class="p">,</span>
</span><span id="__span-17-33">                 <span class="n">controls</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span>
</span><span id="__span-17-34">                 <span class="n">controls</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">Z</span> <span class="p">),</span>
</span><span id="__span-17-35">                 <span class="n">controls</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">W</span> <span class="p">)</span>
</span><span id="__span-17-36">
</span><span id="__span-17-37"><span class="n">curve</span><span class="o">.</span><span class="n">Knots</span><span class="o">.</span><span class="n">CreateUniformKnots</span><span class="p">(</span> <span class="mf">1.0</span> <span class="p">)</span>
</span><span id="__span-17-38">
</span><span id="__span-17-39"><span class="sd">&quot;&quot;&quot; Open Fitted/Interpolated Cubic BSpline</span>
</span><span id="__span-17-40"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-17-41"><span class="n">points</span> <span class="o">=</span> <span class="p">[</span>
</span><span id="__span-17-42">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-17-43">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-17-44">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-17-45">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">3.0</span><span class="p">,</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">),</span>
</span><span id="__span-17-46">    <span class="ne">Point3d</span><span class="p">(</span> <span class="mf">4.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span> <span class="p">)]</span>
</span><span id="__span-17-47">
</span><span id="__span-17-48"><span class="n">curve</span> <span class="o">=</span> <span class="ne">NurbsCurve</span><span class="o">.</span><span class="n">CreateInterpolatedCurve</span><span class="p">(</span> <span class="n">points</span><span class="p">,</span> <span class="mi">3</span> <span class="p">)</span>
</span><span id="__span-17-49">
</span><span id="__span-17-50"><span class="sd">&quot;&quot;&quot; Periodic Rational BSpline</span>
</span><span id="__span-17-51"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-17-52"><span class="n">curve</span> <span class="o">=</span> <span class="ne">NurbsCurve</span><span class="o">.</span><span class="n">CreateFromCircle</span><span class="p">(</span>
</span><span id="__span-17-53">    <span class="ne">Circle</span><span class="p">(</span> <span class="ne">Plane</span><span class="o">.</span><span class="n">WorldXY</span><span class="p">,</span> <span class="mf">1.0</span> <span class="p">)</span> <span class="p">)</span>
</span></code></pre></div>
<p>Some commonly used methods are presented below including projecting points onto curves, splitting and joining curves, performing Boolean operations and offsetting curves.</p>
<div class="highlight"><pre><span></span><code><span id="__span-18-1"><span class="sd">&quot;&quot;&quot; Point Projection on Curve</span>
</span><span id="__span-18-2"><span class="sd">    returns projected point and parameter</span>
</span><span id="__span-18-3"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-18-4"><span class="n">p</span><span class="p">,</span> <span class="n">t</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">ClosestPoint</span><span class="p">(</span> <span class="ne">Point3d</span><span class="o">.</span><span class="n">Origin</span> <span class="p">)</span>
</span><span id="__span-18-5">
</span><span id="__span-18-6"><span class="sd">&quot;&quot;&quot; Split curve in parts at parameter(s)</span>
</span><span id="__span-18-7"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-18-8"><span class="n">parts</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">Split</span><span class="p">(</span> <span class="mf">0.5</span> <span class="p">)</span>
</span><span id="__span-18-9"><span class="n">parts</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">Split</span><span class="p">(</span> <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">]</span> <span class="p">)</span>
</span><span id="__span-18-10">
</span><span id="__span-18-11"><span class="sd">&quot;&quot;&quot; Join curves with tolerance</span>
</span><span id="__span-18-12"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-18-13"><span class="n">curves</span> <span class="o">=</span> <span class="ne">NurbsCurve</span><span class="o">.</span><span class="n">JoinCurves</span><span class="p">(</span> <span class="n">parts</span><span class="p">,</span> <span class="mf">1e-3</span> <span class="p">)</span>
</span><span id="__span-18-14">
</span><span id="__span-18-15"><span class="sd">&quot;&quot;&quot; Boolean operations on closed curves</span>
</span><span id="__span-18-16"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-18-17"><span class="n">curves</span> <span class="o">=</span> <span class="ne">NurbsCurve</span><span class="o">.</span><span class="n">CreateBooleanUnion</span><span class="p">(</span> <span class="n">parts</span><span class="p">,</span> <span class="mf">1e-3</span> <span class="p">)</span>
</span><span id="__span-18-18">
</span><span id="__span-18-19"><span class="sd">&quot;&quot;&quot; Offset curves with rounded corners</span>
</span><span id="__span-18-20"><span class="sd">&quot;&quot;&quot;</span>
</span><span id="__span-18-21"><span class="n">curves</span> <span class="o">=</span> <span class="n">curve</span><span class="o">.</span><span class="n">Offset</span><span class="p">(</span> <span class="ne">Plane</span><span class="o">.</span><span class="n">WorldXY</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">1e-5</span><span class="p">,</span>
</span><span id="__span-18-22">    <span class="n">CurveOffsetCornerStyle</span><span class="o">.</span><span class="n">Round</span> <span class="p">)</span>
</span></code></pre></div>
<h2 id="resources">Resources</h2>
<p><a class="md-button" href="../curves.gh">Grasshopper <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M5 20h14v-2H5m14-9h-4V3H9v6H5l7 7z"/></svg></span></a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright (c) 2024-2025 Digital Design and Fabrication
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.525ec568.min.js"></script>
      
    
  </body>
</html>